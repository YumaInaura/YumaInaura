---
title: "#django | AbstractUser ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œã£ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã¾ã§ã®æ‰‹é †ã®ãƒ‡ãƒ¢"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Django"]
published: true
published_at: 2019-05-15
---

# django-custom-user-demo

django ã§ AbstractUser ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œã£ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã¾ã§ã®æœ€å°æ‰‹é †ã®ãƒ‡ãƒ¢

# Comands


```
django-admin startproject some
cd some

./manage.py startapp users
```

# users/models.py


```py
from django.db import models

from django.contrib.auth.models import AbstractUser

class User(AbstractUser):
  middle_name = models.CharField(max_length=255, null=True, blank=True)
```

# some/settings.py

```diff
+ AUTH_USER_MODEL = 'users.User'
```

```diff
INSTALLED_APPS = [
+    'users.apps.UsersConfig',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]

```


# users/admin.py

```py
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from .models import User

admin.site.register(User, UserAdmin)
```

# Comands

```
./manage.py makemigrations
./manage.py migrate
```

# Create user and show ext field

```
./manage.py shell
```

```
In [2]: from users.models import User

In [3]: u = User.objects.create(middle_name='yay')

In [4]: u.middle_name
Out[4]: 'yay'
```


# Code diffs are on merged PR

- [Custom user by YumaInaura Â· Pull Request #1 Â· YumaInaura/django-custom-user-demo](https://github.com/YumaInaura/django-custom-user-demo/pull/1)
- [Update custom user add "middle_name" field by YumaInaura Â· Pull Request #2 Â· YumaInaura/django-custom-user-demo](https://github.com/YumaInaura/django-custom-user-demo/pull/2)


# å‚è€ƒ
 

>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹å§‹æ™‚ã«ã‚«ã‚¹ã‚¿ãƒ ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹Â¶
æ–°ã—ããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã‚‹å ´åˆã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® User ã§ååˆ†ã§ã‚ã‚‹å ´åˆã§ã‚‚ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆ>ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã¨åŒæ§˜ã«å‹•ä½œã—ã¾ã™ãŒã€å¿…è¦ã«å¿œã˜ã¦å°†æ¥çš„ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:


[Django ã®èªè¨¼æ–¹æ³•ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º | Django ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | Django](https://docs.djangoproject.com/ja/2.2/topics/auth/customizing/#using-a-custom-user-model-when-starting-a-project)

---


>ã‚«ã‚¹ã‚¿ãƒ Userã‚’ä½¿ã†å ´åˆã®æ³¨æ„ç‚¹
>ã‚«ã‚¹ã‚¿ãƒ Userã‚’ä½¿ã†ã«ã¯ã€migrationsã®init(0001)æ™‚ç‚¹ã§ã‚«ã‚¹ã‚¿ãƒ Userã‚’ä½¿ã†ã“ã¨ã‚’å«ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

[Djangoã§ã¯å¸¸ã«ã‚«ã‚¹ã‚¿ãƒ Userã‚’ä½¿ç”¨ã™ã¹ã - Qiita](https://qiita.com/NAKKA-K/items/7627b6a22f364941b989)


>ã™ã§ã«migrateã—ã¦ã„ã‚‹å ´åˆã¯ã€DBã‚’åˆæœŸåŒ–ã—ã¦makemigrationsã—ç›´ã™ã®ãŒæ¥½ã€‚

---

>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç‹¬ç«‹ã•ã›ã‚‹ã¨ã€ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å†åˆ©ç”¨æ€§ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å˜ä½ã§ãƒ€ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œãŒå¯èƒ½ã«ãªã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚

>ã€Œusersã€ã¯cookiecutter-djangoã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹åå‰ã§ã™ã€‚ã“ã¡ã‚‰ã§çµ±ä¸€ã™ã‚‹ã®ãŒã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚
å‚è€ƒï¼šcookiecutter-djangoã‚’ä½¿ã£ã¦ã¿ãŸ

[Django ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³• - Qiita](https://qiita.com/okoppe8/items/10ae61808dc3056f9c8e)


# ãã®ä»–ã®å‚è€ƒè¨˜äº‹


[Djangoã®Userãƒ¢ãƒ‡ãƒ«ã‚’ç¶™æ‰¿ã—ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º | Hornet|é™å²¡æ‹ ç‚¹ã®Webã€ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸åˆ¶ä½œ](https://hombre-nuevo.com/python/python0048/#h2_1)

[Userãƒ¢ãƒ‡ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º | Narito Blog](https://narito.ninja/blog/detail/39/)

[Django Best Practices - William Vincent](https://wsvincent.com/django-best-practices/)

[Django ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ã¾ã¨ã‚ - Qiita](https://qiita.com/okoppe8/items/c9f8372d5ac9a9679396)
 


# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/1853








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2019-05-15
