---
title: "#Twitter #API ã§ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã®ç”»åƒURLã¤ãã® #Json ã‚’å¾—ã‚‹ #python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¾‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Python", "Twitter", "API", "JSON"]
published: true
---

#Twitter #API ã§ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã®ç”»åƒURLã¤ãã® #Json ã‚’å¾—ã‚‹ #python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¾‹

# ãƒ„ã‚¤ãƒƒã‚¿ãƒ©ãƒ³ãƒ‰ã®æ£®ã®å¥¥æ·±ãâ€¥

ç”»åƒURLã¯å¥¥æ·±ãã«éš ã•ã‚Œã¦ã„ã‚‹ã€‚
ãƒ„ã‚¤ãƒ¼ãƒˆã®URLã‚’ä¸ãˆã‚‹ã¨ã€TwitterãŒå‹æ‰‹ã«ç”»åƒã‚’å±•é–‹ã™ã‚‹ä»•æ§˜ã€‚
ç”»åƒç›´æ¥ã®URLã¯ãªã‹è¦‹å½“ãŸã‚‰ãªã„ã€‚
HTMLã‚½ãƒ¼ã‚¹è¦‹ã¦ã‚‚media id ã•ãˆè¦‹å½“ãŸã‚‰ãªã„ã€‚ãªã‚“ã‹Jsã¨ã‹ã§å±•é–‹ã•ã›ã¦ã‚‹ã¯ãšã€‚

# ã‚ã‚ŠãŒã¨ã†Stackoverflow

>Are you adding tweet_mode=extended on your API call to get the new extended Tweet format?

[No media_url in reslt of statuses/user_timeline for some statuses - REST API - Twitter Developers](https://twittercommunity.com/t/no-media-url-in-reslt-of-statuses-user-timeline-for-some-statuses/74736)

# Script

ã“ã‚Œã§è§£æ±ºï¼ï¼ï¼ï¼ï¼ï¼

```
  'tweet_mode' : 'extended'
```

```py
import json, config #æ¨™æº–ã®jsonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨config.pyã®èª­ã¿è¾¼ã¿
from requests_oauthlib import OAuth1Session #OAuthã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿

CK = config.CONSUMER_KEY
CS = config.CONSUMER_SECRET
AT = config.ACCESS_TOKEN
ATS = config.ACCESS_TOKEN_SECRET
twitter = OAuth1Session(CK, CS, AT, ATS) #èªè¨¼å‡¦ç†

url = "https://api.twitter.com/1.1/statuses/user_timeline.json" #ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å–å¾—ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

params ={
  'count' : 5,
  'exclude_replies' : True,
  'tweet_mode' : 'extended'

}
res = twitter.get(url, params = params)

if res.status_code == 200: #æ­£å¸¸é€šä¿¡å‡ºæ¥ãŸå ´åˆ
    timelines = json.loads(res.text) #ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒªã‚¹ãƒˆã‚’å–å¾—
    for line in timelines: #ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒªã‚¹ãƒˆã‚’ãƒ«ãƒ¼ãƒ—å‡¦ç†
        print(line)
else: #æ­£å¸¸é€šä¿¡å‡ºæ¥ãªã‹ã£ãŸå ´åˆ
    print("Failed: %d" % res.status_code)
```

# ã¨ã‚ŒãŸã‚ˆï¼

![image](https://user-images.githubusercontent.com/13635059/52542515-c1936800-2de3-11e9-9a58-44ba1b426dd4.png)

# å®Ÿç‰©

https://pbs.twimg.com/media/DzCn594U0AAP7-v.jpg

![image](https://user-images.githubusercontent.com/13635059/52542529-fd2e3200-2de3-11e9-8f58-68392e616e5c.png)

# Ref

[Pythonã§Twitter API ã‚’åˆ©ç”¨ã—ã¦ã„ã‚ã„ã‚éŠã‚“ã§ã¿ã‚‹ - Qiita](https://qiita.com/bakira/items/00743d10ec42993f85eb)

# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/574








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


