---
title: "Bigquery | LegacySQL ã‹ã‚‰ StandardSQL ã¸ã®ç§»è¡Œãƒ¡ãƒ¢ (æ™‚åˆ»ç³»ã„ãã¤ã‹)"
emoji: "ğŸ–¥"
type: "tech"
topics: ["BigQuery"]
published: true
published_at: 2017-04-12t16:38
---

# é–¢æ•°ã®ã‚«ãƒƒã‚³

## Legacy

çœç•¥ã§ããªã„ã€‚

```sql
SELECT
  TIMESTAMP('2017-04-01 00:00:00.000000'),
  CURRENT_TIMESTAMP()
```

## Standard

çœç•¥ã§ãã‚‹ã€‚ (å¼•æ•°ãŒ0å€‹-1å€‹ã®å ´åˆã®ã¿ï¼Ÿ)
`TIMESTAMP` ã®ä¾‹ãªã©ã€è¦‹ã‹ã‘çš„ã«å‹ã‚’è¡¨ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã€ã‚ˆã‚Šè¨˜è¿°çš„ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```sql
SELECT
  TIMESTAMP '2017-04-01 00:00:00.000000',
  CURRENT_TIMESTAMP
```

# PARSE_UTC_USEC => UNIX_MICROS

## Legacy

```sql
SELECT PARSE_UTC_USEC('2017-04-01 00:00:00.000001')

# 1491004800000001
```

## Standard

```sql
SELECT UNIX_MICROS(TIMESTAMP '2017-04-01 00:00:00.000001')

# 1491004800000001
```

# DATE_ADD => TIMESTAMP_ADD

## Legacy

```sql
SELECT DATE_ADD(CURRENT_TIMESTAMP(), 9, 'HOUR')

# 2017-04-12 15:36:19 UTC
```

ä»Šæ€ãˆã° `DATE_ADD` ã£ã¦é–¢æ•°åãªã®ã«ã€HOUR ã‚„ MINUTE ç­‰ã‚‚ä¸ãˆã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã®ã¯ã€ç›´æ„Ÿçš„ã˜ã‚ƒãªã‹ã£ãŸã€‚

## Standard

```sql
SELECT TIMESTAMP_ADD(CURRENT_TIMESTAMP(), INTERVAL 9 HOUR)

# 2017-04-12 15:36:19 UTC
```

TIMESTAMPå‹ã‚’æ“ä½œã—ã¦ã„ã‚‹ã“ã¨ãŒã€ç›´æ¥åˆ†ã‹ã‚‹é–¢æ•°åã«ãªã£ãŸã€‚(ã¡ãªã¿ã« `DATETIME_ADD` ã‚‚ã‚ã‚‹)

# WHERE ã§ TIMESTAMPå‹ ã‚’ãƒã‚¤ã‚¯ãƒ­ã‚»ã‚«ãƒ³ãƒ‰ç§’ã¾ã§æ¯”è¼ƒã™ã‚‹

# Legacy

TIMESTAMPå‹ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã€ãƒã‚¤ã‚¯ãƒ­ã‚»ã‚«ãƒ³ãƒ‰ã§ã®æ¯”è¼ƒãŒã§ããŸã€‚

```sql
SELECT
  *
FROM (
  SELECT
    TIMESTAMP('2017-04-01 00:00:00.000000') AS target )
WHERE
  target >= 1491004800000000
```

## Standard

TIMESTAMPå‹ã¯TIMESTMAPå‹ã§æ¯”è¼ƒã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
(ã¡ãªã¿ã«LegacySQLã§ã‚‚åŒã˜æ›¸ãæ–¹ã¯å‡ºæ¥ã¦ã„ãŸ)

```sql
SELECT
  *
FROM (
  SELECT
    TIMESTAMP '2017-04-01 00:00:00.000000' AS target)
WHERE
  target >= TIMESTAMP '2017-04-01 00:00:00.000000'
```

# å‚ç…§

## Legacy

- [Query Reference Â |Â  BigQuery Documentation Â |Â  Google Cloud Platform](https://cloud.google.com/bigquery/docs/reference/legacy-sql)

## Standard

- [Query Syntax Â |Â  BigQuery Documentation Â |Â  Google Cloud Platform](https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax)
- [Functions & Operators Â |Â  BigQuery Documentation Â |Â  Google Cloud Platform](https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators)








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2017-04-12
