---
title: "BigQuery | bq load ã‚³ãƒãƒ³ãƒ‰ã§partitioned table ã‚’ä½œæˆã™ã‚‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["BigQuery"]
published: true
published_at: 2017-05-25t18:23
---

# ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹

```
$ bq mk --time_partitioning_type=DAY dataset.table
```

# é©å½“ãªãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„

```:forload.log
alice
bob
carol
```

# BigQueryã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

```
$ bq load dataset.table forload.log name:string
```

# ç¢ºèª

ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨å†…éƒ¨çš„ã«ã€Œä»Šæ—¥ã®æ—¥ä»˜ã€ãŒè¨˜éŒ²ã•ã‚Œã‚‹ã€‚
ã“ã‚Œã‚’WHEREå¥ã§çµã‚Šè¾¼ã‚€ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚

```sql
#LegacySQL
SELECT
  *
FROM
  [dataset.table]
WHERE
  _PARTITIONTIME = TIMESTAMP("2017-05-25")
```

![image.png](https://qiita-image-store.s3.amazonaws.com/0/89618/1d31c6ad-14d1-436d-9f99-e5be071cb623.png)

# æ—¥ä»˜ã‚’æŒ‡å®šã—ã¦ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³å½¢å¼ã®ãƒ†ãƒ¼ãƒ–ãƒ«åã‚’æŒ‡å®šã—ã¦ã€ãã®ã¾ã¾ãƒ­ãƒ¼ãƒ‰ã™ã‚Œã°è‰¯ã„ã€‚

```
$ bq dataset.table\$20170101 forload.log name:string
```

### æ³¨æ„

**ãƒ‰ãƒ«è¨˜å·ã‚’ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ ( `\` ) ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã“ã¨ï¼**
ã“ã‚Œã‚’å¿˜ã‚Œã‚‹ã¨ã€ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«ã€Œç¾åœ¨ã®æ™‚åˆ»ã€ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã•ã‚Œã¦ã—ã¾ã†ã€‚(ã‚·ã‚§ãƒ«ã®ç‰¹æ®Šè¨˜å·ãªã®ã§)

ã“ã‚“ãªé¢¨ã«ã€ç©ºã®å¤‰æ•°ã¨ã—ã¦æ‰±ã‚ã‚Œã¦ã—ã¾ã†ã€‚

```
echo $20170101
```

# ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ç¢ºèª

ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æƒ…å ±ã‚’ç¢ºèªã§ãã‚‹ã€‚

```
#LegacySQL
SELECT
  *
FROM
  [dataset.table$__PARTITIONS_SUMMARY__]
```

![image.png](https://qiita-image-store.s3.amazonaws.com/0/89618/7e6e34fa-131b-1a66-b898-8fcfd6ef30d8.png)


# å‚è€ƒ

- [Creating and Updating Date-Partitioned Tables Â |Â  BigQuery Documentation Â |Â  Google Cloud Platform](https://cloud.google.com/bigquery/docs/creating-partitioned-tables)








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2017-05-25
