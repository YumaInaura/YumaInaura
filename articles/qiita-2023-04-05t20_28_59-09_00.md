---
title: "AWS ECS ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã§ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ ( curl ) ãŒå¤±æ•—ã—ç¶šã‘ã‚‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["AWS", "ECS"]
published: true
published_at: 2023-04-05t20:28
---

# å•é¡Œ

Terraformã§ã„ã†ã¨ã“ã‚“ãªã‚¿ã‚¹ã‚¯å®šç¾©
å˜ç´”ã« curl ã—ã¦ã„ã‚‹ã ã‘ãªã®ã ãŒä½•æ•…ã‹å¤±æ•—ã—ç¶šã‘ã‚‹

```
  "healthCheck": {
    "command": [
      "CMD-SHELL",
      "curl -f http://127.0.0.1:80/ || exit 1"
    ],
  }
```

# è§£æ±º

docker container ã« curl ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„ã®ãŒåŸå› ã ã£ãŸ
Dockerfile ã§ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã†ã«ã—ãŸã‚‰æˆåŠŸã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ

ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã¯ã‚³ãƒ³ãƒ†ãƒŠæœ¬ä½“ã‹ã‚‰å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã 

ã‚ã¨ã‹ã‚‰åˆ†ã‹ã£ã¦ã¿ã‚Œã°è‡ªæ˜ã®ç†ãªã®ã ãŒã—ã°ã‚‰ãæ°—ã¥ã‹ãªã‹ã£ãŸ

ã¾ãšã¯localã§docker containerã«æ¥ç¶šã—ã¦ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãã®ã¾ã¾ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦è©¦ã™ã¨è‰¯ã„ã‚ˆã†ã 

`curl -f http://127.0.0.1:80/ || exit 1`

# å‚è€ƒ

>è§£æ±ºæ–¹æ³•
>Amazon ECS ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®å¤±æ•—ã‚’ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ãƒ’ãƒ³ãƒˆã‚’è©¦ã—ã¦ãã ã•ã„ã€‚
>
>Amazon ECS ã«ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã™ã‚‹å‰ã«ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã«åˆæ ¼ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
>ã‚³ãƒ³ãƒ†ãƒŠã«æ¸¡ã™ã‚³ãƒãƒ³ãƒ‰ãŒæ­£ã—ãã€[Amazon ECS ã‚¿ã‚¹ã‚¯ã«æ­£ã—ã„æ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨](https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_HealthCheck.html#API_HealthCheck_Contents)ã‚’ç¢ºèªã—ã¾ã™ã€‚


https://repost.aws/ja/knowledge-center/ecs-task-container-health-check-failures


# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ


# Twitter

https://twitter.com/YumaInaura


# å…¬é–‹æ—¥æ™‚

2023-04-05
