---
title: #rsec ã§ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã—ã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œã‚’ expect / allow ã§ãƒ¢ãƒƒã‚¯ã™ã‚‹ä¾‹ ( ActionMailer ã§ã®ãƒ¡ãƒ¼ãƒ«
emoji: "ğŸ–¥"
type: "idea"
topics: ["Ruby", "Rails", "rsec"]
published: true
---

ã“ã‚“ãªã®ã©ã†ã‚„ã£ã¦ãƒ¢ãƒƒã‚¯ã™ã‚‹ã®ï¼Ÿ

```rb
ActionMailer::Base.email(subject: 'YES').deliver
```

.email ã¯ãƒ¢ãƒƒã‚¯ã§ãã¦ã‚‚ã€ email ã®çµæœãŒ nil ã«ãªã‚‹ã®ã§ .deliver ã§è½ã¡ã‚‹ã€‚

# ã“ã†ã ã€‚

å‘¼ã³å‡ºã—çµæœã« deliver ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™ã€‚

```rb
expect(ActionMailer::Base).to receive(:email).and_return double(deliver: nil)
```


# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2593








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


