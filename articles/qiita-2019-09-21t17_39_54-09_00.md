---
title: #AWS Lambda ã®å®Ÿè¡Œãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹  ( SQSã®å®Ÿè¡Œæ¨©é™ã‚’ä¸ãˆã‚‹ä¾‹ )
emoji: "ğŸ–¥"
type: "idea"
topics: ["AWS"]
published: true
---

# å®Ÿè¡Œãƒ­ãƒ¼ãƒ«ã¨ã¯

AWS Lambda ã€ŒãŒã€AWSã®ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã€Œã‚’ã€ä½¿ã†ã¨ãã®è¨±å¯ã€ãƒãƒªã‚·ãƒ¼ã¿ãŸã„ã ã€‚

https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/lambda-intro-execution-role.html

![image](https://user-images.githubusercontent.com/13635059/65368625-89f47480-dc7e-11e9-8b17-4d62429cb5bb.png)

# ãƒ­ãƒ¼ãƒ«ã®ä½œæˆ

ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ã—ã¦ã€ŒAWSã‚µãƒ¼ãƒ“ã‚¹ã€ã‚’ã€ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ã€ŒLambdaã€ã‚’é¸ã‚“ã§æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚€ã€‚

https://console.aws.amazon.com/iam/home?#/roles$new?step=type

![image](https://user-images.githubusercontent.com/13635059/65368611-6a5d4c00-dc7e-11e9-9ece-a0bc0444848f.png)

# ä»Šå›å¿…è¦ãªæ¨©é™

SQSã¨ã®é€£æºã‚’ã—ãŸã„ã®ã§ã€æ¬¡ã®3é …ç›®ã‚’è¨±å¯ã—ãŸã„ã€‚

```
sqs:ReceiveMessage
sqs:DeleteMessage
sqs:GetQueueAttributes
```

https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/with-sqs.html

# ãƒãƒªã‚·ãƒ¼ã®ãƒ•ã‚£ãƒ«ã‚¿ã‚’ä½¿ã£ã¦ã€SQSã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã™ã‚‹


![image](https://user-images.githubusercontent.com/13635059/65368664-5b2ace00-dc7f-11e9-825c-6ffeae888c84.png)

# ãƒãƒªã‚·ãƒ¼ã®ä¸­èº«ã‚’è¦‹ã‚‹

(æ“ä½œã—ã¥ã‚‰ã„ã€ãªã«ã“ã‚Œâ€¦ï¼)

![image](https://user-images.githubusercontent.com/13635059/65369033-35072d00-dc83-11e9-863d-7d5f10060402.png)

*AWSLambdaSQSQueueExecutionRole* é …ç›®ã‚’é–‹ã„ã¦ JSON  è¡¨ç¤ºã‚’é¸ã¶ã¨ã€å¿…è¦ãª Action ãŒå…¥ã£ã¦ã„ãã†ãªã“ã¨ãŒã‚ã‹ã‚‹ã€‚

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "sqs:ReceiveMessage",
                "sqs:DeleteMessage",
                "sqs:GetQueueAttributes",
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
            ],
            "Resource": "*"
        }
    ]
}
```

# ãƒãƒªã‚·ãƒ¼ã‚’é¸ã‚“ã§æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚€

# ã‚¿ã‚°ã®é¸æŠã¯é£›ã°ã™

# ã¦ãã¨ã†ãªåå‰ã‚’ã¤ã‘ã¦ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹

![image](https://user-images.githubusercontent.com/13635059/65369053-6f70ca00-dc83-11e9-91a6-7814619765e5.png)



# ä½œæˆå®Œäº†

![image](https://user-images.githubusercontent.com/13635059/65369063-88797b00-dc83-11e9-962e-fe5ebc271908.png)

# Lamdaã®è¨­å®š

ã“ã‚Œã§lambdaé–¢æ•°ã®ã€Œå®Ÿè¡Œãƒ­ãƒ¼ãƒ«ã€ã‹ã‚‰ã€æ–°ã—ã„ãƒ­ãƒ¼ãƒ«ãŒé¸ã¹ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

![image](https://user-images.githubusercontent.com/13635059/65369076-c080be00-dc83-11e9-87a3-df51a69385ff.png)

# ã“ã‚Œã§å‹•ãã‹ãªï¼Ÿ

ã‚ˆã—ã€è©¦ãã†ã€‚

# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2496








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


