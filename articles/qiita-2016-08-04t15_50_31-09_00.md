---
title: "ãƒãƒ¼ãƒ å†…ç™ºè¡¨ä¼šç”¨ | ã“ã‚Œã‹ã‚‰ã‚·ã‚§ãƒ«ã®(ç’°å¢ƒå¤‰æ•°ã®)(ã‚ã‚Šã¨åŸºæœ¬ã®)è©±ã‚’ã™ã‚‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ruby", "ShellScript", "Bash"]
published: true
---

# ãƒãƒ¼ãƒ å†…ç™ºè¡¨ä¼šç”¨ã€‚

Qiitaã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒä¾¿åˆ©ãªã®ã§ã€ä½¿ã„ã¾ã™ã€‚

---

# about me

ã‚·ã‚§ãƒ«ã‘ã£ã“ã†åˆå¿ƒè€…ã§ã™ã€‚
ã ã„ãŸã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ perl ã§æ›¸ã„ã¦ãã¾ã—ãŸã€‚

ã€Œã‚·ã‚§ãƒ«é›£ã—ãã†ã€ã€Œé­”è¡“ã‚ã„ã¦ã‚‹ã—ã€ã¨æ€ã£ã¦ã¾ã—ãŸã€‚
ã§ã‚‚æœ€è¿‘ã¯ã€ã‚·ã‚§ãƒ«ã‚’ã‚ˆãè§¦ã£ã¦ã„ã¾ã™ã€‚

---

åŠ›é‡çš„ã«ã¯ã€ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨æ¯”è¼ƒã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã‹ãªãƒ¼ã¨æ€ã£ã¦ã¾ã™ã€‚

```
æŸYã•ã‚“
æŸYã•ã‚“
æŸYã•ã‚“
â‡¡
â‡¡
â‡¡
----------(é›²)------------
â‡¡
â‡¡
â‡¡
â‡¡
â‡¡
â‡¡
â‡¡
Y (me)
â‡¡
----------(åœ°ä¸Š)----------
â‡¡
ç’°å¢ƒå¤‰æ•°ãŒã‚ˆãåˆ†ã‹ã‚‰ãªã„
â‡¡
for in ã£ã¦ä½•ï¼Ÿ
â‡¡
echo ã£ã¦ä½•ï¼Ÿ
```

---

# ä»Šå›ã¯

ç’°å¢ƒå¤‰æ•°ã«ã¤ã„ã¦ã®èª¤è§£ã—ã¦ã„ãŸã“ã¨ã‚’ãŠè©±ã—ã¾ã™ã€‚

ã‚·ã‚§ãƒ«ã‚’çŸ¥ã£ã¦ã‚‹äººã«ã¨ã£ã¦ã¯åŸºæœ¬ã®è©±ã ã¨æ€ã†ã®ã§ã€
é€”ä¸­ã§æ­£è§£ã‚’ç™ºè¡¨è€…ã«æ•™ãˆã¦ãŸããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã‚†ã£ãã‚Šã”è¦§ãã ã•ã„ã€‚

---

# ãã‚Œã¯ã‚ã‚‹æ—¥ã®ã“ã¨ã§ã—ãŸã€‚

ã“ã“ã«äºŒã¤ã®ã”ãç°¡å˜ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚Šã¾ã™ã€‚

---

å—ã‘å–ã£ãŸç’°å¢ƒå¤‰æ•° ( `NAME` ) ã‚’å¼·åˆ¶çš„ã«æ›¸ãæ›ãˆã€rubyã«æ¸¡ã™ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚

```bash:to_ruby.sh
NAME='James Brown'

ruby from_shell.rb
```

---

ã‚·ã‚§ãƒ«ã‹ã‚‰ç’°å¢ƒå¤‰æ•° ( `NAME` ) ã‚’å—ã‘å–ã£ã¦ã€æ¨™æº–å‡ºåŠ›ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚

```ruby:from_shell.rb
puts "#{ENV['NAME']} in ruby"
```

---

# ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯

ã€Œã‚·ã‚§ãƒ«ã§ç’°å¢ƒå¤‰æ•°ã‚’æ›¸ãæ›ãˆã¦ã€ãã‚Œã‚’rubyã§è¡¨ç¤ºã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

(ã“ã®ä¾‹ã§ã¯ç´ ã® ruby ã«ãªã£ã¦ã¾ã™ãŒã€å•é¡Œã«è¡Œãå½“ãŸã£ãŸã®ã¯ rake å…ˆç”Ÿã¨éŠã‚“ã§ã„ãŸæ™‚ã§ã—ãŸ )

---

ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ ç’°å¢ƒå¤‰æ•° NAME ã«ä½•ã‚’æ¸¡ã—ã¦ã‚‚ã€`James Brown` ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```bash
$ NAME='Michel Jackson' bash to_ruby.sh 
James Brown in ruby
```

---

ã¾ã£ãŸãæ„å‘³ãŒãªã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã®ã§ã€å®Ÿè¡Œæ™‚ã«ã‚‚ç’°å¢ƒå¤‰æ•°ã‚’çœç•¥ã—ã¾ã—ã‚‡ã†ã€‚
ã“ã‚Œã§ã€å˜ã« James Brown ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ãªã‚‹ã¯ãšã§ã™ã€‚

```
$ bash to_ruby.sh 
```

---

ã¨ã“ã‚ãŒçµæœã¯ã€‚ã€‚ã€‚
James Bronn ãŒæ¶ˆãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚

```
$ bash to_ruby.sh 
 in ruby
```

---

ãã“ã§ `to_ruby.sh` ã§ `NAME` ã®ä¸­èº«ã‚’ç¢ºã‹ã‚ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã™ã€‚

```bash:to_ruby.sh
NAME='James Brown'

echo $NAME in shell

ruby from_shell.rb
```

---

ãã—ã¦ã¾ãŸåŒã˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€‚ã€‚ã€‚

```
$ bash to_ruby.sh 
James Brown in shell
 in ruby
```

ã‚·ã‚§ãƒ«ã«ã¯ James Brown ãŒã„ã‚‹ã®ã«ã€rubyã‹ã‚‰ã¯æ¶ˆãˆã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚

---

ã¤ã¾ã‚Šã‚·ã‚§ãƒ«ã®å¤‰æ•° `NAME` ã¯ç’°å¢ƒå¤‰æ•°ã§ã¯ãªããªã£ã¦ã—ã¾ã£ãŸã‚“ã§ã™ã­ã€‚ã€‚ã€‚

---

ã“ã“ã‹ã‚‰åˆ†ã‹ã£ãŸã“ã¨ã¯

- ç’°å¢ƒå¤‰æ•° = å¤§æ–‡å­—
- ã‚·ã‚§ãƒ«å¤‰æ•° = å°æ–‡å­—

ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã£ãŸã®ã§ã™ãŒã€ãã‚Œã¯ã‚ãã¾ã§ã‚‚ã€Œæ…£ç¿’ã€ã«ã™ããªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚

=> [ã‚µãƒ¼ãƒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®çŸ¥æµè¢‹
](http://seesaawiki.jp/w/engineernochiebukuro/d/%A5%B7%A5%A7%A5%EB%CA%D1%BF%F4%A4%C8%B4%C4%B6%AD%CA%D1%BF%F4)
>é€šå¸¸ã€æ…£ä¾‹ã¨ã—ã¦ç’°å¢ƒå¤‰æ•°ã¯å¤§æ–‡å­—ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‹ã‚‰å¤‰æ•°åã‚’ä½¿ç”¨ã—ã€ã‚·ã‚§ãƒ«å¤‰æ•°ã¯å°æ–‡å­—ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‹ã‚‰ãªã‚‹æ–‡å­—åˆ—ã‚’ä½¿ç”¨ã™ã‚‹ã€‚ã—ã‹ã—ã€æ©Ÿèƒ½çš„ã«ã¯ã©ã¡ã‚‰ã®å¤‰æ•°ã«ã©ã¡ã‚‰ã‚’ä½¿ç”¨ã—ã¦ã‚‚æ§‹ã‚ãªã„ã€‚


---

ç’°å¢ƒå¤‰æ•°ã‚’æ›¸ãæ›ãˆä¸èƒ½ã«ã™ã‚‹ã«ã¯ã€ readonly ã‚’ã¤ã‘ã‚‹ã®ãŒè‰¯ã„ã§ã™ã­ã€‚

```bash:readonly.sh
readonly NAME
NAME='James Brown'

echo $NAME
```

ã‚·ã‚§ãƒ«å†…ã§ NAME ã‚’å¤‰æ›´ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
å¤‰æ•°ã¯å…ƒã®ã¾ã¾ ( Michel Jackson ) ã®ã¾ã¾ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚
 
```bash
$ NAME='Michel Jackson' bash readonly.sh
readonly.sh: line 2: NAME: readonly variable
Michel Jackson
```

---

ã“ã‚Œã‚’å…ƒã« [ã‚ãªãŸãŒæ‰±ã£ã¦ã„ã‚‹ã®ã¯æœ¬å½“ã«ç’°å¢ƒå¤‰æ•°ã§ã™ã‹ï¼Ÿ](http://qiita.com/YumaInaura/items/69c6935aa5193630da07) ã¨ã„ã†è¨˜äº‹ã‚’Qiitaã«æ›¸ã„ãŸã¨ã“ã‚ã€ 6 Stock ã‚’ã‚‚ã‚‰ã£ãŸã®ã§ã€ã‚ã‚‹ç¨‹åº¦ã¯éœ€è¦ãŒã‚ã‚‹æƒ…å ±ã ã£ãŸã‚ˆã†ã§ã™ã€‚

![image](https://qiita-image-store.s3.amazonaws.com/0/89618/36074286-208f-c1d9-0f19-565b81206c02.png)

---


# çµè«–

- ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§ã€ã„ããªã‚Šå¤§æ–‡å­—ã®å¤‰æ•°ä»£å…¥ ( `NAME=James Brown` ) ã‚’ã—ã¦ã‚‚ã€ç’°å¢ƒå¤‰æ•°ã«ã¯ãªã‚‰ãªã„ã€‚
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§ç’°å¢ƒå¤‰æ•°ã‚’ä½œã‚‹å ´åˆã¯ export ( `export NAME=James Brown` ) ã¨æ›¸ãã€‚
- ã„ã¡ã©ç’°å¢ƒå¤‰æ•°ã«ã€Œãªã£ãŸã€å¤‰æ•°ã¯ã€æ™®é€šã®å¤‰æ•°ã¨åŒã˜ã‚ˆã†ã«ä»£å…¥ã§ãã‚‹ã€‚ ( `NAME=James Brown` )
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆèµ·å‹•æ™‚ã« `NAME='James Brown' to_ruby.sh` ã®ã‚ˆã†ã«æ›¸ã„ãŸå ´åˆã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§ export ã—ãŸã®ã¨åŒã˜åŠ¹æœãŒå¾—ã‚‰ã‚Œã‚‹ã€‚

---

# ã¨ã“ã‚ã§

ç’°å¢ƒå¤‰æ•° = å¤§æ–‡å­—
å¤‰æ•° = å°æ–‡å­—

ã¨ã„ã†è©±ã‚’ã—ã¾ã—ãŸãŒã€

Google ãŒ [Shell Style Guide](https://google.github.io/styleguide/shell.xml) ã¨ã„ã†ã®ã‚’ä½œã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

(ã‚ãã¾ã§Googleå†…ã®ãƒ«ãƒ¼ãƒ«ã£ã½ã„?)

---

ç’°å¢ƒå¤‰æ•°ã‚„å®šæ•°ã¯å¤§æ–‡å­—ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã«æ›¸ã“ã†ãœã€‚

>## Constants and Environment Variable Names
>All caps, separated with underscores, declared at the top of the file.
>Constants and anything exported to the environment should be capitalized.

ã€Œå®šæ•°ã€ãªãŠã‹ã¤ç’°å¢ƒå¤‰æ•°ã€ã‚’å®£è¨€ã™ã‚‹æ–¹æ³•ã‚‚è¼‰ã£ã¦ã„ãŸã€‚

```bash
# Constant
readonly PATH_TO_FILES='/some/path'

# Both constant and environment
declare -xr ORACLE_SID='PROD'
```

---

ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã§æ›¸ã“ã†ãœã€‚ãƒã‚¤ãƒ•ãƒ³ç¦æ­¢ã€‚(ã“ã“ã§ã¯æ‹¡å¼µå­ãŒãªã„ã‚ˆã†ã«è¦‹ãˆã‚‹)

>## Source Filenames
>Lowercase, with underscores to separate words if desired.
>This is for consistency with other code styles in Google: maketemplate or make_template but not make-template.

---

readonly ã¨ã—ã¦ä½¿ã†å¤‰æ•°ã¯æ˜ç¤ºçš„ã« readonly ã—ã‚ˆã†ãœã€‚

>## Read-only Variables

>Use readonly or declare -r to ensure they're read only.
>As globals are widely used in shell, it's important to catch errors when working with them. When you declare a variable that is meant to be read-only, make this explicit.

zipã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã€Œreadonlyã€ã®å¤‰æ•°ã¨ã—ã¦ã„ã‚‹ä¾‹ã€‚

```bash
zip_version="$(dpkg --status zip | grep Version: | cut -d ' ' -f 2)"
if [[ -z "${zip_version}" ]]; then
  error_message
else
  readonly zip_version
fi
```

---

é–¢æ•°ã®ä¸­ã ã‘ã§ä½¿ã†å¤‰æ•°ã¯ local å®£è¨€ã—ã‚ˆã†ãœã€‚

>## Use Local Variables
>Declare function-specific variables with local. Declaration and assignment should be on different lines.

```bash
my_func2() {
  local name="$1"
..
```

---

ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã®ã‹ã‚ã‚Šã« `$()` ã‚’ä½¿ãŠã†ãœã€‚
ãƒã‚¹ãƒˆã™ã‚‹ã®ã‚‚èª­ã‚€ã®ã‚‚ç°¡å˜ã ã‹ã‚‰ã€‚

>## Use $(command) instead of backticks.
>Nested backticks require escaping the inner ones with \. The $(command) format doesn't change when nested and is easier to read.



---

ãƒ‘ã‚¤ãƒ—ã§ã®é€£çµãŒ1è¡Œã«åã¾ã‚‰ãªã„å ´åˆã¯ã€è¤‡æ•°è¡Œã«åˆ†ã‘ã‚ˆã†ãœã€‚

> ## Pipelines
>Pipelines should be split one per line if they don't all fit on one line.
>If a pipeline all fits on one line, it should be on one line.
>Pipelines should be split one per line if they don't all fit on one line.

```bash
# All fits on one line
command1 | command2

# Long commands
command1 \
  | command2 \
  | command3 \
  | command4
```

---

ãƒ«ãƒ¼ãƒ—å†…ã§ä½¿ã†å¤‰æ•°ã¯ã€å±•é–‹å…ƒã®å¤‰æ•°ã¨ä¼¼ãŸã‚‚ã®ã«ã—ã‚ˆã†ãœã€‚

>Variable Names
>As for function names.
>Variables names for loops should be similarly named for any variable you're looping through.

```bash
for zone in ${zones}; do
  something_with "${zone}"
done
```

---

ãã‚‚ãã‚‚ã©ã‚“ãªæ™‚ã«ã‚·ã‚§ãƒ«ã‚’ä½¿ã†ã®ã‹ã€‚
ã‚·ãƒ³ãƒ—ãƒ«ãªä»•äº‹ã®ãŸã‚ã€ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã¨ã—ã¦ä½¿ãŠã†ãœã€‚

>## When to use Shell
>Shell should only be used for small utilities or simple wrapper scripts.


---

ã©ã®ã‚·ã‚§ãƒ«ã‚’ä½¿ãˆã°è‰¯ã„ã®ã‹ã€‚
**bash ãŒå”¯ä¸€ã®é¸æŠè‚¢** ã ãœã€‚

>## Which Shell to Use
>Bash is the only shell scripting language permitted for executables.

---

# ã‚·ã‚§ãƒ«ã£ã¦å¯æ„›ã„ã‚„ã¤ã§ã™ã­ï¼ 

#  (çµ‚)








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


