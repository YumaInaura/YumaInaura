---
title: "#Ruby #Rails + #rspec ã§ rspec-benchmark gem ã‚’ â€ä½¿ã‚ãš\" ã«é€Ÿåº¦æ¤œè¨¼ãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ruby", "Rails", "RSpec"]
published: true
published_at: 2019-07-11
---

# Speed test and benchmark test "do not use" with rspec-benchmark gem with #Ruby #Rails + #rspec


# ãƒã‚¤ãƒ³ãƒˆ

- rspec ã‚’ä½¿ã†ã¨è‰²ã€…ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ/è‡ªå‹•å‰Šé™¤ãªã©ã—ã¦ãã‚Œã‚‹ã®ã§ã€æ–°ã—ã„ä»•çµ„ã¿ã‚’ç”¨æ„ã—ãªãã¦è‰¯ã„
- rspec-benchmark gem ãŒãªãœã‹ã†ã¾ãå‹•ã‹ãªã‹ã£ãŸ
- ä»¥ä¸‹ã®ä¾‹ã¯ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãªã©ã¯ã—ã¦ã„ãªã„ãŒã€ FactoryBot ã‚’çµ„ã¿åˆã‚ã›ãŸã‚Šã™ã‚‹ã¨ä¾¿åˆ©

# é€Ÿåº¦ã‚’æ¤œè¨¼ã™ã‚‹

```rb
require 'benchmark'

describe 'sleep 5 seconds ( expect speed )' do
  subject do
    Benchmark.realtime { sleep 5 }
  end

  it { is_expected.to be < 6 }
end

# sleep 5 seconds ( expect speed )
#  should be < 6
```

# é€Ÿåº¦ã¯æ¤œè¨¼ã›ãšã€æ¨™æº–å‡ºåŠ›ã§çµæœç¢ºèªã ã‘ã‚’ã™ã‚‹


```rb
require 'benchmark'

describe 'sleep 5 seconds ( not expect speed but stdout benchmark result )' do
  subject do
    Benchmark.realtime { sleep 5 }
  end

  it { puts subject }
end

# sleep 5 seconds ( not expect speed but stdout benchmark result )
# 5.003996700048447
#  example at ./spec/some_spec.rb:18
```

# é€Ÿåº¦æ¤œè¨¼ã‚’ã—ã¤ã¤ã€æ¨™æº–å‡ºåŠ›ã§çµæœã‚‚ç¢ºèªã™ã‚‹

```rb
require 'benchmark'

describe 'sleep 5 seconds ( expect subject result and stdout benchmark result )' do
  subject do
    sleep 5
    true
  end

  it do
    subject_result = nil
    benchmark_time = Benchmark.realtime { subject_result = subject }
    puts benchmark_time

    expect(subject_result).to be true
    expect(benchmark_time).to be < 6
  end
end


# sleep 5 seconds ( expect subject result and stdout benchmark result )
# 5.005656399996951
#   should be < 6
```

# çµæœã®ä¾‹

```
rspec -fd some_benchmark_spec.rb
```

![image](https://user-images.githubusercontent.com/13635059/61013831-531cfb00-a3bf-11e9-99ff-026ecefeefc6.png)



# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2261








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2019-07-11
