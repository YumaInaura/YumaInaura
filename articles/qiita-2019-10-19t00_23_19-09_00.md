---
title: "#docker - Dockerfile + docker-compose ã§ development / production ãªã©ã®ç’°å¢ƒ"
emoji: "ğŸ–¥"
type: "idea"
topics: ["Docker"]
published: true
---

- Dockerfile ã® FROM AS ã§ã€ã¦ãã¨ã†åå‰ã‚’ã¤ã‘ã¦ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã€‚ä½œæˆã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å…ƒã«åˆ¥ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã€‚
- AS ã§åå‰ã‚’ã¤ã‘ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã«å¯¾ã—ã¦ docker-compose.yml ã§ target æŒ‡å®šã™ã‚‹ã€‚

ã£ã¦æ„Ÿã˜ã§å®Ÿç¾ã§ãã‚‹ã£ã½ã„ã€‚

æœ¬ç•ªã¨é–‹ç™ºç·©æ€¥ã§åˆ¥ã® docker-compose.yml ã‚’ä½¿ã†æ„Ÿã˜ã‹ãªã€‚

```
FROM python:3.6 as base
RUN apt-get update && apt-get upgrade -y
RUN pip install pipenv pip
COPY Pipfile ./
# some more common configuration...

FROM base as dev
RUN pipenv install --system --skip-lock --dev
ENV FLASK_ENV development
ENV FLASK_DEBUG 1

FROM base as prod
RUN pipenv install --system --skip-lock
ENV FLASK_ENV production
Then you can build one stage or another using the --target syntax to build, or a compose file like:
```

```
# docker-compose.yml
version: '3.4'
services:
  webapp:
    build:
      context: ./dir
      dockerfile: Dockerfile
      target: prod
```

[Google Calendar - October 2019](https://calendar.google.com/calendar/r#main_7)

[Use multi-stage builds | Docker Documentation](https://docs.docker.com/develop/develop-images/multistage-build/)

# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2600








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


