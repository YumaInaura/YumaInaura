---
title: "docker-compose ã§ è¤‡æ•°ã® Dockerfile ã‚’ã¾ãŸã„ã§ build ã§ãã‚‹ã®ã ã‚ã†ã‹ï¼Ÿ ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ãŠããŸã„"
emoji: "ğŸ–¥"
type: "idea"
topics: ["Docker"]
published: true
---

# docker-compose ã§ã“ã‚“ãªã“ã¨ãŒã‚„ã‚ŠãŸã„

- Dockerfile ã‹ã‚‰ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ build ã™ã‚‹
- ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å…ƒã« Dockerfile ã‚’ä½œæˆã—ã¦ãã‚Œã‚’ docker-compose ã§ä½¿ã†

ä»¥ä¸‹ã¯ã‚¤ãƒ¡ãƒ¼ã‚¸

```yml
version: '3'

services:
 base-service:
    build: base-dir
    as: some_base_iimage # æ¶ç©ºã®æŒ‡å®š
 child-service:
    build: child-dir
```

# base-dir/Dockerfile

```
FROM alpine
...
```

# child-dir/Dockerfile

```
FROM some_base_iimage
...
```


# è§£æ±º1

ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ã£ã¦buildã™ã‚‹ã‚ˆã†ã«ã™ã‚‹


`./build.sh`

```bash
cd other-dir && docker build -t  . some_base_image && cd -
docker-compose build
```

ã“ã‚“ãªã‚“ã§è‰¯ã„ã ã‚ã†ã‹

ãã‚‚ãã‚‚ docker-compose ã®ä»•çµ„ã¿ã«ä¹—ã‚Œã‚‹ã‹ã©ã†ã‹åˆ†ã‹ã‚‰ãªã„ã®ã§

docker-compose ã¯å…¨ã¦ã® docker image ãŒæƒã£ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã«ä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã¯ï¼Ÿ

# è§£æ±º2

Dockerhub ã«ãƒ¬ãƒã‚¸ãƒˆãƒªã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ãŠã
ã„ã¡ã©å›ºã‚ã¦ãŠã‘ã° online ã‹ã‚‰å–ã‚Œã‚‹ã‚ˆã­



# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2720








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


