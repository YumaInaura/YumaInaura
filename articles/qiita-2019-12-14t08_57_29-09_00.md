---
title: #Stripe ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä½œæˆã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã® web hook ã‚’ stripe cli ã®ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å—ã‘å–ã‚‹
emoji: "ğŸ–¥"
type: "idea"
topics: ["stripe"]
published: true
---

How to

# CLIã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹


```
stripe listen
```

ã“ã‚Œã ã‘ï¼

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã™ããƒ‡ãƒã‚¤ã‚¹ãŒç¾ã‚Œã‚‹ã€‚

>Stripe CLI ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹
>Stripe CLI ã‚’åˆ©ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ãƒˆãƒªã‚¬ãƒ¼ã—ã¾ã™ã€‚

![image](https://user-images.githubusercontent.com/13635059/70754881-b3073b80-1d7b-11ea-8535-425fb7c36264.png)

# ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œã‚’ãƒ†ã‚¹ãƒˆ

Stripeãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰é¡§å®¢ã‚’ä½œæˆã—ã¦ã¿ã‚‹.

![image](https://user-images.githubusercontent.com/13635059/70754941-d8944500-1d7b-11ea-82f9-610363a645b9.png)

# çµæœ

localã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼

```
$ stripe listen
> Ready! Your webhook signing secret is xxxxxxxxxxxxxxxxxxxxxxxxxxxx(^C to quit)
2019-12-13 07:41:06   --> customer.created [evt_1Fp0LGCmti5jpytUYaiA0xBE]
```

ã¡ãªã¿ã«
# webhookã‚’è»¢é€ã™ã‚‹

listenã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’èãã ã‘ãªã®ã§ã€ã“ã‚Œã‚’localã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«è»¢é€ã™ã‚‹ã«ã¯ --forward ã•ã›ã‚‹

```
stripe listen --forward-to localhost:5000/webhooks
```

# Webhooké€ä¿¡ãƒ†ã‚¹ãƒˆï¼Ÿ

ã¡ãªã¿ã« stripe cli ã¯ã‚ãã¾ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¦ã„ã‚‹ã®ã§ã‚ã£ã¦ã€è¨­å®šæ¸ˆã¿ã®WebHookã¸ã®ç›´æ¥é€ä¿¡ã‚’ã—ã¦ã¿ã¦ã‚‚ã€cliã§ãƒˆãƒªã‚¬ãƒ¼ã§ãã‚‹ã‚ã‘ã§ã¯ãªã„ã‚ˆã†ã ã€‚

![image](https://user-images.githubusercontent.com/13635059/70755101-48a2cb00-1d7c-11ea-9985-6b145f9398c6.png)

# ã¤ã¾ã‚Š

ã“ã®äºŒã¤ã®æµã‚Œã 

- Stripeã®ã‚¤ãƒ™ãƒ³ãƒˆ --> webhookãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹ 
- Stripeã®ã‚¤ãƒ™ãƒ³ãƒˆ --> stripe cli ã§ãƒˆãƒªã‚¬ãƒ¼ --> local ã§ç‰¹å®šã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«webhookãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è»¢é€ã™ã‚‹


# Ref

Configuring the Endpoint | Stripe
https://stripe.com/docs/webhooks/configure#send-test-event

# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2841








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


