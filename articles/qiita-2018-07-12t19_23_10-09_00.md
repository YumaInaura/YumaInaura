---
title: Ansible playbook | register ã§ã®å¤‰æ•°å®šç¾©ã¯ã‚¿ã‚¹ã‚¯ã®ã‚¹ã‚­ãƒƒãƒ—æ™‚ã«ã‚‚ãŠã“ãªã‚ã‚Œã‚‹
emoji: "ğŸ–¥"
type: "idea"
topics: ["Ansible"]
published: true
---

# ç–‘å• : ã‚¿ã‚¹ã‚¯ãŒ skip ã•ã‚Œã‚‹æ™‚ã€ register ã§ã®å¤‰æ•°å®šç¾©ã¯ã•ã‚Œã‚‹ã®ã‹ï¼Ÿ

ä¾‹:

```yaml
tasks:
  - debug:
      msg: debug
    register: debugged_register
    when: false
```

# ç­”ãˆ : ã•ã‚Œã‚‹

å¤‰æ•°ã¯æœªå®šç¾©ã«ãªã‚‰ãªã„ã€‚
ã‚¹ã‚­ãƒƒãƒ—ç†ç”±ãªã©ãŒè¨˜éŒ²ã•ã‚Œã‚‹æ¨¡æ§˜ã€‚

```json
{
  "changed": false,
  "skip_reason": "Conditional result was False",
  "skipped": true
}
```



# Playbookã®ä¾‹

```register.yml
- hosts: localhost
  tasks:
    - name: add register with execute debug module
      debug:
        msg: add debug module result into debugged_register variable
      register: debugged_register

    - name: show register variable values set by execute debug module
      debug:
        msg: "{{ debugged_register }}"

    - name: skip execute task but register got variable
      debug:
        msg: add register of debug module result!
      register: not_executed_module_register
      when: false

    - name: show not_executed_module_register variable
      debug:
        msg: "{{ not_executed_module_register }}"

    - assert:
        that:
          - not_executed_module_register is defined
          - not_executed_module_register is not changed
          - not_executed_module_register is skipped
 
``` 


# å®Ÿè¡Œä¾‹

```

TASK [add register with execute debug module] ****************************************************************************************************
ok: [localhost] => {
    "msg": "add debug module result into debugged_register variable"
}

TASK [show register variable values set by execute debug module] *********************************************************************************
ok: [localhost] => {
    "msg": {
        "changed": false, 
        "failed": false, 
        "msg": "add debug module result into debugged_register variable"
    }
}

TASK [skip execute task but register got variable] ***********************************************************************************************
skipping: [localhost]

TASK [show not_executed_module_register variable] ************************************************************************************************
ok: [localhost] => {
    "msg": {
        "changed": false, 
        "skip_reason": "Conditional result was False", 
        "skipped": true
    }
}

TASK [assert] ************************************************************************************************************************************
ok: [localhost] => {
    "changed": false, 
    "msg": "All assertions passed"
}

PLAY RECAP ***************************************************************************************************************************************
localhost                  : ok=5    changed=0    unreachable=0    failed=0   

```

# ç’°å¢ƒ

- ansible 2.6.0








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


