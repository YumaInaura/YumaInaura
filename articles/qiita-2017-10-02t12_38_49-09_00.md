---
title: "Docker | docker ã§ logrotate ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹"
emoji: "ğŸ–¥"
type: "idea"
topics: ["Linux", "åˆå¿ƒè€…", "Docker"]
published: true
---

(ã‚ã¾ã‚ŠDockeré–¢ä¿‚ãªã„ã‘ã©å‚™å¿˜ã‚’å…¼ã­ã¦)

# ç”¨æ„ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

## Dockerfile

```:Dockerfile
FROM ubuntu

RUN apt-get update
RUN apt-get install -y vim logrotate

COPY logrotate_conf logrotate_conf
COPY some.log /root/some.log

CMD logrotate -f logrotate_conf && ls ~/
```

## ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```:logrotate_conf
~/some.log {
        daily
        missingok
        rotate 52
        dateext
        compress
        create 644 root root
}
```

## ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

```:some.log
A
B
C
```


# Dockerã‚’å®Ÿè¡Œ

## ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰

```
$ docker build . -t logrotate
```

## ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œ

```
$docker run logrogate
some.log
some.log-20171002.gz
```

## ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã£ã¦è©¦ã™å ´åˆ

```
$ docker run -it logrotate /bin/bash
```

# ç’°å¢ƒ

- Docker version 17.06.1-ce, build 874a737








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


