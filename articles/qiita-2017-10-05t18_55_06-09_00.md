---
title: "Bigquery | peco ã§é€£ç¶šã—ã¦ã‚¸ãƒ§ãƒ–è©³ç´°ã‚’è¦‹ã‚‹ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ"
emoji: "ğŸ–¥"
type: "tech"
topics: ["BigQuery", "Peco", "googlecloud"]
published: true
---

æœ€è¿‘ã® Bigqueryã®ã‚¸ãƒ§ãƒ–ã®ä¸­ã‹ã‚‰ã€å¥½ããªã‚‚ã®ã‚’é¸ã‚“ã§è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

- é€£ç¶šã—ã¦ä½•å€‹ã‚‚ã®ã‚¸ãƒ§ãƒ–è©³ç´°ã‚’è¦‹ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚
- ã“ã®ä¾‹ã§ã¯æœ€æ–°1000ä»¶ã®ã‚¸ãƒ§ãƒ–å±¥æ­´ã‹ã‚‰æ¢ã™ã‚ˆã†ã«ã—ãŸã€‚

# å®Ÿè¡Œä¾‹

èµ°ã‚‰ã›ã‚‹ã ã‘ã€‚

```
bash bq_ls_peco.sh
```

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# Usage
# bash bq_ls_peco.sh [grep_text]
# 
# Example
# bash bq_ls_peco.sh
# bash bq_ls_peco.sh FAILURE

function finish {
  rm .bq_ls_peco
}

trap finish EXIT

function read_bq_jobs {
  echo "Read bq jobs, just wait a minute."
  bq ls -j -a -n 1000 > .bq_ls_peco
}

read_bq_jobs

if [ -n "$1"]; then
  readonly grep_mode='RUNNING\|FAILURE' 
else
  readonly grep_mode=$1
fi

trap
while true; do
  bq show -j --format=prettyjson $(cat .bq_ls_peco | grep "$grep_mode" | peco | awk '{print $1}')

  echo -e "\nPlease enter and another next job, or hit \"exit\" \"reload\""
  read ans

  if [ "$ans" == exit ]; then
   exit
  elif [ "$ans" == reload ]; then
    read_bq_jobs
  fi
done
```

# ç’°å¢ƒ

- Google Cloud SDK 174.0.0
- bq 2.0.27
- bash 4.4








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


