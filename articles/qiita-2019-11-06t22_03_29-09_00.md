---
title: "#Ruby ã® AASM ã£ã¦ä½•ï¼Ÿ Rails ã˜ã‚ƒãªãã¦ã‚‚ä½¿ãˆã‚‹ã®ï¼Ÿ ä½¿ãˆã‚‹ã‚ˆï¼"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ruby"]
published: true
---

ãã‚Œã ã‘ã€‚ä»¥ä¸Šã€‚

# gem

[aasm/aasm: AASM - State machines for Ruby classes (plain Ruby, ActiveRecord, Mongoid)](https://github.com/aasm/aasm)

ã„ã‚ã„ã‚ãª ORM ã«ã‚¢ãƒ€ãƒ—ã‚¿ã¨ã—ã¦ä½¿ã‚ã‚Œã¦ã‚‹ã‘ã©ã€ã©ã‚“ãªRuby Classã§ã‚‚ä½¿ãˆã‚‹ã£ã¦æ›¸ã„ã¦ã‚‹æ°—ãŒã™ã‚‹ã‚ˆã€‚

>This package contains AASM, a library for adding finite state machines to Ruby classes.
>AASM started as the acts_as_state_machine plugin but has evolved into a more generic library that no longer targets only ActiveRecord models. It currently provides adapters for many ORMs but it can be used for any Ruby class, no matter what parent class it has (if any).

# ã‚³ãƒ¼ãƒ‰ã¨å‹•ä½œä¾‹

```rb
require 'aasm'

class Job
  include AASM

  aasm do
    state :sleeping, initial: true
    state :running, :cleaning

    event :run do
      transitions from: :sleeping, to: :running
    end

    event :clean do
      transitions from: :running, to: :cleaning
    end

    event :sleep do
      transitions from: [:running, :cleaning], to: :sleeping
    end

    after_all_transitions :log_status_change
  end

  def log_status_change
    puts "changing from #{aasm.from_state} to #{aasm.to_state} (event: #{aasm.current_event})"
  end
end
```

```rb
job = Job.new
# => #<Job:0x00007fb0d9f80750>

job.run
# => changing from sleeping to running (event: run)
```

# ãªã‚“ã§DBãŒãªãã¦ã‚‚å‹•ãã®ï¼Ÿ

DBãªã‚“ã¦ãªãã¦ã‚‚çŠ¶æ…‹ã¯ä¿æŒã§ãã‚‹ã‹ã‚‰ã ã‚ˆã€‚è¦ã™ã‚‹ã«ãƒ¡ãƒ¢ãƒªã­ã€‚ã†ã‚“ã€‚

è€ƒãˆã¦ã¿ã‚Œã°å½“ãŸã‚Šå‰ã ã‚ˆã­ã€‚



# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2673








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


