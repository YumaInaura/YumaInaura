---
title: "#Slack ã§ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ #Twitter ã«ã‚‚ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ä¾‹ by #Zapier + #python"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Python", "Twitter", "Slack", "zapier"]
published: true
published_at: 2019-03-15
---

# ä½•

- Zapierã®é€šå¸¸ãƒˆãƒªã‚¬ãƒ¼ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã ã‘ã§ã¯å®Œçµã§ããªã„ã®ã§ python ã‚’ä½¿ã†
- Slackå´ã§ public share image è¨­å®šã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- Slack ã® pemalink public ãŒ ç”»åƒã˜ã‚ƒãªãã¦ HTMLãªã®ã§ã€ãã®ä¸­ã‹ã‚‰ç”»åƒURLã‚’æŠ½å‡ºã—ã¦ä½¿ã†

# Slack ã® New File ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã™ã‚‹

![image](https://user-images.githubusercontent.com/13635059/54393658-0ca7e000-46ee-11e9-93af-7a2ffd00a2fa.png)

# Code by Zapier ã§ python ã‚’èµ°ã‚‰ã›ã‚‹

Slackã® æƒ…å ±ã‚’ input ã«å…¥ã‚Œã‚‹
Slack ã® OAuth token ã¯ã¹ãŸæ›¸ãã™ã‚‹

![image](https://user-images.githubusercontent.com/13635059/54394132-5218dd00-46ef-11e9-8c9f-fcc0a2ae3429.png)


```py
out = {}

import requests, os, re

token = input_data['token']
channel = input['channel_id']

file_id = input['file_id']

share_api_url ='https://slack.com/api/files.sharedPublicURL?token=' + token + '&file=' + file_id + '&pretty=1'

share_api_res = requests.get(share_api_url)
out['share_api_results'] = share_api_res.json()

permalink_public_res = requests.get(input['permalink_public'])
match = re.search(r'<img src="([^\s]+?)">', permalink_public_res.text)

out['public_image_url'] = match[1]


output = [out]
```

# Twitter ã® Create Image Tweet ã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ã™ã‚‹

![image](https://user-images.githubusercontent.com/13635059/54393754-51cc1200-46ee-11e9-9dc4-7fa708b3f593.png)


# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/778








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2019-03-15
