---
title: "#Github issue ã‚’ä½œæˆã™ã‚‹ã¨ #Medium #API ã§æ–°è¦ãƒã‚¹ãƒˆã™ã‚‹è‡ªå‹•é€£æºã®ä¾‹ã€‚Zapierã‚’åˆ©ç”¨ã€‚"
emoji: "ğŸ–¥"
type: "tech"
topics: ["GitHub", "API", "Medium"]
published: true
published_at: 2019-02-10
---

#Github issue ã‚’ä½œæˆã™ã‚‹ã¨ #Medium #API ã§æ–°è¦ãƒã‚¹ãƒˆã™ã‚‹è‡ªå‹•é€£æºã®ä¾‹ã€‚Zapierã‚’åˆ©ç”¨ã€‚

# çµæœã®ä¾‹

ã‚¿ã‚°ã‚‚æŒ‡å®šã§ãã¦ã„ã‚‹

ãªã‚“ã¨ç”»åƒã¯è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã€Mediumã«ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ãã‚Œã¦ã„ã‚‹ã€ã™ã’ãˆã€ç”»åƒã‚’ãƒã‚¹ãƒˆã™ã‚‹APIã‚’åˆ¥é€”å©ãå¿…è¦ãŒãªã„ã¿ãŸã„ã 

![image](https://user-images.githubusercontent.com/13635059/52520046-ebe00b00-2ca7-11e9-9bee-33a04d62c491.png)

# Medium API ã®å–å¾—

Mediumãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨­å®šãƒšãƒ¼ã‚¸ã‹ã‚‰
é …ç›®ãŒãªã‘ã‚Œã°ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡ã—ã¦æœ‰åŠ¹åŒ–ã—ã¦ã‚‚ã‚‰ã†

# Github issue ã®ä½œæˆãŒãƒˆãƒªã‚¬ãƒ¼

![image](https://user-images.githubusercontent.com/13635059/52520050-fc908100-2ca7-11e9-8f46-456054281b2a.png)

# Code by Zapier ã® python å®Ÿè¡Œã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ã™ã‚‹

title
content
url 

ã«ãã‚Œãã‚Œ Github issue ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã‚‹

token ã«ã¯ç›´æ¥ Medium API Application ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥ã‚Œã‚‹


![image](https://user-images.githubusercontent.com/13635059/52520058-16ca5f00-2ca8-11e9-8283-84479f2c28fd.png)
![image](https://user-images.githubusercontent.com/13635059/52520062-2184f400-2ca8-11e9-983a-50d4f4419233.png)

# Script

ãªã‚“ã¨ format ã‚’æŒ‡å®šã™ã‚‹ã¨ã€markdownã®ã¾ã¾ãƒã‚¹ãƒˆå‡ºæ¥ã‚‹
æœ€åˆã¯ Zapier  ã® Formatter ã§ Markdown to HTML å¤‰æ›ã‚’ã—ã‚ˆã†ã¨æ€ã£ãŸãŒã€å¿…è¦ãªã‹ã£ãŸ

ã‚¿ã‚¤ãƒˆãƒ«ã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã€Mediumã®ã‚¿ã‚°ã¨ã—ã¦æ‰±ã£ã¦ã„ã‚‹


```
# -*- coding: utf-8 -*-

import requests
import re

# Get me author id
me_api_url = 'https://api.medium.com/v1/me'

me_api_headers = {
 'Authorization': 'Bearer {}'.format(input['token'])
}

me_api_res = requests.get(me_api_url, headers=me_api_headers)
author_id = me_api_res.json()['data']['id']


# Post Story
# https://github.com/Medium/medium-api-docs#33-posts

url = 'https://api.medium.com/v1/users/{author_id}/posts'.format(author_id=author_id)

headers = {
 'Authorization': 'Bearer {}'.format(input['token']),
 'Content-Type': 'application/json',
}

# ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’æŠ½å‡ºã—ã¦Qiita API ç”¨ã«æ•´å½¢
title_hashtags = re.findall(r'#([^\s]+)', input['title'])
medium_tags = []
for title_hashtag in title_hashtags:
    medium_tags.append(title_hashtag)

# ã‚¿ã‚¤ãƒˆãƒ«ã§ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸæ™‚
if not medium_tags:
    medium_tags = []


json = {
  "title": input['title'],
  "contentFormat": "markdown",
  "content": input['content'],
  "canonicalUrl": input['url'],
  "tags": medium_tags,
  "publishStatus": "public"
}

res = requests.post(url, headers=headers, json=json)

output = res.json()
```



# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/569








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2019-02-10
