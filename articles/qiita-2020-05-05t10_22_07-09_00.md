---
title: "yarn + #Vue ã® #nuxt.js ã§ axios-mock-server ã‚’åˆ©ç”¨ã—ã¦ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ä¾‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Vue.js", "Nuxt"]
published: true
published_at: 2020-05-05t10:22
---

# ãƒã‚¤ãƒ³ãƒˆ/æ„Ÿæƒ³

2020/05/04

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ï¼Ÿã‹ä½•ã‹ã§ã€è¨­å®šã—ã¦ãªã„ã¯ãšã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã‚‚ã€ã¦ãã¨ã†ã« mock ã•ã‚Œã¦ã—ã¾ã£ã¦ã€æŒ™å‹•ã‚’ç†è§£ã™ã‚‹ã¾ã§ã—ã°ã‚‰ãã‹ã‹ã£ãŸ
- nuxt ã§å‹•ãã‚³ãƒ¼ãƒ‰ä¾‹ãŒä¸¸ã”ã¨ã‚ã£ã¦åŠ©ã‹ã£ãŸ
- axiosçµŒç”±ã§å¤–éƒ¨ã‚µã‚¤ãƒˆã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚‚ã™ã¹ã¦ mock ã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€mock ã‚’ã‚„ã‚ã‚‹æ™‚ã« nuxt.config ã‹ã‚‰ plugin ã®è¨˜è¿°ã‚’ä¸¸ã”ã¨å‰Šé™¤ã—ãŸ ( README ãªã©ã‚’ã¡ã‚ƒã‚“ã¨èª­ã‚“ã§ã„ã‘ã°æ‰±ã„æ–¹ãŒåˆ†ã‹ã‚‹ã ã‚ã†ã‘ã‚Œã© )
- ã¾ã ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ1ã«ãªã£ã¦ã„ãªã„ ( 0.16.3 )
- ã™ã”ãç°¡å˜ãªjsãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚‹ã ã‘ã§æ‰‹è»½ã«mockãŒåˆ©ç”¨ã§ãã‚‹
- ãã‚‚ãã‚‚ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ã¨ãŠã‚Šã€ã‚ãã¾ã§ axios çµŒç”±ã§ã® mock ã‚µãƒ¼ãƒãƒ¼ãªã®ã§ curl ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ã‹ã€ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯ä½¿ãˆãªã„ã¯ãš



# Ref

[m-mitsuhide/axios-mock-server: RESTful mock server using axios.](https://github.com/m-mitsuhide/axios-mock-server)

[RESTfulãªã€Œaxios-mock-serverã€ã®ä½¿ã„æ–¹ - Qiita](https://qiita.com/m_mitsuhide/items/b8e073cba0dae5af2359)

# å‚è€ƒ

ã“ã®è¨˜äº‹ã®ã¨ãŠã‚Šã«ä½œã£ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

https://github.com/YumaInaura/nuxt-yarn-axios-mock-example

https://github.com/YumaInaura/nuxt-yarn-axios-mock-example/pull/1/files

å…¬å¼ã§ã€nuxtã§ãˆä¸¸ã”ã¨å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¸€å¼ãŒã‚ã£ãŸã®ã§ã€ã“ã‚Œã‚’å‚è€ƒã«ã—ãŸ

https://github.com/m-mitsuhide/axios-mock-server/tree/develop/examples/with-nuxtjs


# ã‚„ã‚Šæ–¹


nuxt ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹

```
yarn create nuxt-app my-project
cd my-project
```

å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```
yarn add axios
yarn add axios-mock-server --dev
yarn add @nuxtjs/axios
```

package.json 

dev ã§èµ·å‹• ( yarn dev ) ã™ã‚‹æ™‚ã«
åŒæ™‚ã« mock ã‚µãƒ¼ãƒãƒ¼ã‚‚èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ã—ã¦ãŠã


```
{
  "scripts": {
    "dev": "yarn mock:build && nuxt && yarn mock:watch",
    "mock:build": "axios-mock-server --build",
    "mock:watch": "axios-mock-server --watch"
  },
}
```

nuxt.config.js ã§ module / plugins ã®è¨­å®šã‚’ã™ã‚‹

```
...
  plugins: [
    '~/plugins/mock.js'
  ],

  modules: [
    '@nuxtjs/axios',
  ],
...
```


plugins/mock.js

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®èª­ã¿è¾¼ã¿ç”¨
axios ã¨ mock ã‚’é–¢é€£ä»˜ã‘ã‚‹ãŸã‚ã®ã‚‚ã®ã£ã½ã„

```
import mock from '~/mocks/$mock.js'

export default ({ $axios }) => {
  mock($axios)
}
```

mocks/$mock.js

`yarn axios-mock-server --build` ã§è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã£ã½ã„

```js
/* eslint-disable */
import mockServer from 'axios-mock-server'
import mock0 from './users/_userId'

export default (client) => mockServer([
  {
    path: '/users/_userId',
    methods: mock0
  }
], client, '')

```


`mocks/users/_userId.js`

ã„ã¡ã©ãƒ‡ãƒ¼ã‚¿ã‚’ users ã®é…åˆ—ã§ä½œã£ã¦ã„ã‚‹
ã“ã®ä¾‹ã ã¨ id 0 ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼

value ( ã“ã®ä¾‹ã ã¨APIã®ãƒ‘ã‚¹ã«ãµãã¾ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼id ) ã«å¯¾å¿œã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¤ã‘ã¦ãã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ã¨ã„ã†ã“ã¨ã‚’ã€ã‚‚ã®ã™ã”ãç°¡æ½”ãªè¨˜è¿°ã§å‡ºæ¥ã‚‹ã¿ãŸã„ã 

å¯¾å¿œã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å¢—ã‚„ã—ãŸã„å ´åˆã¯ã€é…åˆ—ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¢—ã‚„ã›ã°è‰¯ã„

```js
const users = [{ id: 0, name: 'foo' }]

export default {
  get({ values }) {
    return [200, users.find(user => user.id === values.userId)]
  }
}
```


pages/index.vue

è¨­å®šã—ãŸ mock ã« axios çµŒç”±ã§ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ãŠã

```vue
<template>
  <div class="container">
    <div>
      <h1 class="title">
        mock API
      </h1>
    </div>
    <div>
       {{ data }}
    </div>
  </div>
</template>

<script>
import axios from 'axios'

export default {
  async asyncData ({ $axios, params }) {
    const data = await $axios.$get(`/users/0`)
    return { data }
  }
}
</script>
```


# ä¾‹

http://localhost:3000/

![image](https://user-images.githubusercontent.com/13635059/80929133-94661780-8de4-11ea-9de0-a976fc78b696.png)


# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/3129











<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2020-05-05
