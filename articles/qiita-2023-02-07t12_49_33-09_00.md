---
title: "Nuxt3 ã‚’ AWS ECS ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ ( + Dockerfileã®ä¾‹ )"
emoji: "ğŸ–¥"
type: "idea"
topics: ["AWS", "Nuxt"]
published: true
---

# å‰æ

ECSå…¬å¼ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’å®Œäº†ã—ã¦ãŠã‚Šã€ECSã‚¯ãƒ©ã‚¹ã‚¿ãƒ»VPCãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ãªã©ã®è¨­å®šãŒã§ãã¦ã„ã‚‹ã“ã¨

https://catalog.us-east-1.prod.workshops.aws/workshops/7ffc4ed9-d4b3-44dc-bade-676162b427cd/ja-JP/1-introduction/1-overview

# nuxtãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

`npx nuxi init nuxt-ex`
`cd nuxt-ex`

# Dockerfile

nuxtãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«Dockerfileã‚’ä½œæˆ
port ã¯80ã«ã—ã¦ãŠã

```dockerfile
FROM node:19.5.0-alpine3.16

RUN mkdir /web
WORKDIR /web

RUN apk update && \
    npm install -g npm && \
    npm install -g vue-cli

COPY package.json /web/

RUN npm install
CMD PORT=80 npm run dev
```

# ãƒ“ãƒ«ãƒ‰

```
docker build -t nuxt-ex .
```

# local ã§å‹•ä½œç¢ºèª

ã¦ãã¨ã†ãªportã«ã¤ãªã’ã‚‹
```
docker run -it -p 7000:80 nuxt-ex
```

# ECRãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’push ã™ã‚‹

<img width="531" alt="image" src="https://user-images.githubusercontent.com/13635059/217143271-551d89c2-b901-4342-a29d-e3f9debf92a7.png">

```
docker tag nuxt-ex:latest **********.dkr.ecr.ap-northeast-1.amazonaws.com/nuxt-ex:latest
docker push **********.dkr.ecr.ap-northeast-1.amazonaws.com/nuxt-ex:latest
```

# AWSã§ã‚¿ã‚¹ã‚¯å®šç¾©ã‚’ä½œæˆ

ä»Špushã—ãŸECRã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒ‡å®šã™ã‚‹

ã‚¤ãƒ¡ãƒ¼ã‚¸URLã¯ docker push ã§ä½¿ã£ãŸã‚‚ã®ãã®ã¾ã¾

 `**********.dkr.ecr.ap-northeast-1.amazonaws.com/nuxt-ex:latest`


<img width="1438" alt="image" src="https://user-images.githubusercontent.com/13635059/217142437-9e273089-fb80-4238-a5ca-b47a7f66558b.png">


# ECSã§ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ

ã•ãã»ã©ä½œã£ãŸã‚¿ã‚¹ã‚¯å®šç¾©ã‚’æŒ‡å®šã™ã‚‹

<img width="1373" alt="image" src="https://user-images.githubusercontent.com/13635059/217142766-4f8a151d-7b5f-4880-bdf4-dea9b5cd58ac.png">

ã¦ãã¨ã†ã«æ—¢å­˜ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã‚’ä½¿ã†ã‹æ–°è¦ã«ä½œã‚‹

<img width="884" alt="image" src="https://user-images.githubusercontent.com/13635059/217143449-8b9957e4-569c-4477-abd3-a6c7b78f6513.png">



# ãƒ‡ãƒ—ãƒ­ã‚¤é€²è¡Œä¸­

CloudFormationã®ãƒ­ã‚°ã§ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆãŒæˆåŠŸã—ãŸã“ã¨ãŒåˆ†ã‹ã‚‹ã€Œ

<img width="1440" alt="image" src="https://user-images.githubusercontent.com/13635059/217142826-33941979-3769-4d67-9ac4-ae70d8e23600.png">

ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ãŒç¾ã‚Œã‚‹

<img width="1440" alt="image" src="https://user-images.githubusercontent.com/13635059/217142909-f16c94fd-514e-45ba-8b88-59ac1090d895.png">

# Webã‚¢ã‚¯ã‚»ã‚¹

ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚¿ãƒ–ã§ã€Œã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã®ãƒªãƒ³ã‚¯ã‚’é–‹ã

<img width="1440" alt="image" src="https://user-images.githubusercontent.com/13635059/217143005-23b1cc2e-4173-44e6-a48e-781e9db9e464.png">

# æˆåŠŸ

![image](https://user-images.githubusercontent.com/13635059/217142287-5d02942c-6aa1-4421-ae0d-c1e395e04d70.png)


# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ


# Twitter

https://twitter.com/YumaInaura


