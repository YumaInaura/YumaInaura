---
title: "Ruby | ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ruby", "åˆå¿ƒè€…", "ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³"]
published: true
published_at: 2017-02-09t15:50
---

include ã™ã‚‹ã ã‘ã§ OK ã€‚

```ï½’b
require 'singleton'
```

```rb
class A
  include Singleton
end
```


# æ¤œè¨¼

## é€šå¸¸ã®ã‚¯ãƒ©ã‚¹

å½“ãŸã‚Šå‰ã ãŒã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã®ãŸã³ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDã¯å¤‰ã‚ã‚‹ã€‚

```rb
class B
end
```

```rb
puts B.new.object_id # 70357495108880
puts B.new.object_id # 70357495108820
puts B.new.object_id # 70357495108760
```

## ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚¯ãƒ©ã‚¹

ä½•åº¦å‘¼ã³å‡ºã—ã¦ã‚‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDã¯ä¸€ç·’ã ã€‚
`new` ã§ã¯ãªãç‰¹ç•°ãƒ¡ã‚½ãƒƒãƒ‰ã® `instance` ã‚’å‘¼ã¶ã€‚

```rb
puts A.instance.object_id # 70357495109120
puts A.instance.object_id # 70357495109120
puts A.instance.object_id # 70357495109120
```

## ä¿¡æ†‘æ€§

ä»–ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ã€ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‘¼ã³å‡ºã—ã¦ã‚‚ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆIDã¯å¤‰ã‚ã‚‰ãªã„ã€‚

```rb
class A
  include Singleton
end
```

```rb
class B
  def call_singleton_instance
    A.instance.object_id
  end
end
```

```rb
puts A.instance.object_id # 70180072059980
puts A.instance.object_id # 70180072059980
puts A.instance.object_id # 70180072059980

puts B.new.call_singleton_instance # 70180072059980
puts B.new.call_singleton_instance # 70180072059980
puts B.new.call_singleton_instance # 70180072059980
```

## initialize

initialize ã‚‚ä¸€åº¦ã—ã‹ãŠã“ãªã‚ã‚Œãªã„ã€‚

```rb
class A
  include Singleton

  def initialize
    puts 'initialized'
  end
end
```

```rb
A.instance # initialized
A.instance
A.instance
```

### å¼•æ•°

initialize ã«å¼•æ•°ã‚’å–ã‚‹ã“ã¨ã¯ã§ããªã„ã£ã½ã„ã€‚
ã€Œä¸–ç•Œã«ã²ã¨ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‹ã®ã«ã€å¼•æ•°ãªã‚“ã‹è¦ã‚‰ãªã„ã‚ˆã­ã€ã£ã¦ç†è§£ã—ãŸã€‚

```rb
class A
  include Singleton

  def initialize(argument)
  end
end
```

ç‰¹ã«è¦ªåˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å‡ºã—ã¦ãã‚Œãªã„ã£ã½ã„ã€‚

```rb
A.instance 'argument' # `instance': wrong number of arguments (given 1, expected 0) (ArgumentError)

A.instance # `instance': wrong number of arguments (given 1, expected 0) (ArgumentError)
```

# ç’°å¢ƒ

- ruby 2.3.1

# å‚è€ƒ

- https://ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html
- http://stackoverflow.com/questions/4217968/a-problem-about-singleton-in-ruby








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2017-02-09
