---
title: ã‚ˆãåˆ†ã‹ã‚‰ãªã„ #Ruby ã® CSV#read ã¨ CSV#open ã®é•ã„
emoji: "ğŸ–¥"
type: "idea"
topics: ["Ruby"]
published: true
---

# csv

```
A,B,C
A,B,C
A,B,C
```

# read

- ãã®åã®é€šã‚Šèª­ã¿å–ã‚Šå°‚ç”¨ã€‚
- é…åˆ—ã®é…åˆ—ã§ä¸­èº«ã‚’è¿”ã™ã€‚

```rb
CSV.read('/tmp/3.csv')
=> [["A", "B", "C"], ["A", "B", "C"], ["A", "B", "C"]]
```

headers ã‚’æŒ‡å®šã™ã‚‹ã¨ `CSV::Table` ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚‹

```rb
CSV.read('/tmp/3.csv', headers: true)
=> #<CSV::Table mode:col_or_row row_count:3>
```

each ã™ã‚‹ã¨ç¹°ã‚Šè¿”ã—ã”ã¨ã«CSVã®è¡Œ ( `CSV::Row` ) ãŒå¾—ã‚‰ã‚Œã‚‹

```rb
CSV.read('/tmp/3.csv', headers: true).each { |line| p line}
#<CSV::Row "A":"A" "B":"B" "C":"C">
#<CSV::Row "A":"A" "B":"B" "C":"C">
=> #<CSV::Table mode:col_or_row row_count:3>
````

æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã“ã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚Šã€ãªãŠã‹ã¤ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ãŒå…¨ã¦æ¶ˆãˆã‚‹ã€‚ãªã«ã“ã‚Œã€‚

```rb
CSV.read('/tmp/3.csv', 'r')
=> [["A", "B", "C"], ["A", "B", "C"], ["A", "B", "C"]]

CSV.read('/tmp/3.csv', 'w')
# IOError: not opened for reading
# from /Users/yumainaura/.rbenv/versions/2.6.3/lib/ruby/2.6.0/csv/parser.rb:202:in `gets'

CSV.read('/tmp/3.csv', 'r')
=> []
```

# open

èª­ã¿å–ã‚Šã˜ã‚ƒãªãã¦è‰²ã€…ã§ãã‚‹ã‚„ã¤ã€‚
CSVã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚‹

```rb
CSV.open('/tmp/3.csv')
=> <#CSV io_type:File io_path:"/tmp/3.csv" encoding:UTF-8 lineno:0 col_sep:"," row_sep:"\n" quote_char:"\"">
```

headers ã‚’æŒ‡å®šã—ã¦ã‚‚åŒã˜

```rb
CSV.open('/tmp/3.csv', headers: true)
=> <#CSV io_type:File io_path:"/tmp/3.csv" encoding:UTF-8 lineno:0 col_sep:"," row_sep:"\n" quote_char:"\"" headers:true>
```

each ã™ã‚‹ã¨ç¹°ã‚Šè¿”ã—ã”ã¨ã«CSVã®è¡Œ ( `CSV::Row` ) ãŒå¾—ã‚‰ã‚Œã‚‹

```rb
CSV.open('/tmp/3.csv', headers: true).each { |line| p line}
#<CSV::Row "A":"A" "B":"B" "C":"C">
#<CSV::Row "A":"A" "B":"B" "C":"C">
=> #<CSV::Table mode:col_or_row row_count:3>
```

open ã—ã¦ read ã™ã‚‹ã¨ CSV.read ã¨åŒã˜ã `CSV::Table` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè¿”ã£ã¦ãã‚‹

```rb
CSV.open('/tmp/3.csv', headers: true).read
=> #<CSV::Table mode:col_or_row row_count:3>
````

ãƒ•ã‚¡ã‚¤ãƒ«ã¸æ›¸ãè¾¼ã¿ã‚‚ã§ãã‚‹

```rb
CSV.open("path/to/file.csv", "wb") do |csv|
  csv << ["row", "of", "CSV", "data"]
  csv << ["another", "row"]
  # ...
end
````

# å‚è€ƒ

[[Ruby]CSV::TableãŒä¾¿åˆ© - Qiita](https://qiita.com/hkengo/items/59ba599ef48c613f2402)

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿ãªã•ã„ã ã£ã¦ï¼Ÿ

ã¨ã¦ã‚‚ã¨ã¦ã‚‚ã‚ˆãã‚ã‹ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ¬²ã—ã„ã€‚

# ãŠç–²ã‚Œã˜ã‚ƒãªã„ã§ã™ã‹ï¼ŸRubyãƒ—ãƒ­ã‚°ãƒ©ãƒã®çš†ã•ã‚“

é©åº¦ã«ä¼‘ã¿ã‚’å–ã‚Šã¾ã—ã‚‡ã†ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¯1æ—¥1æ™‚é–“ã¾ã§ã€‚
![image](https://user-images.githubusercontent.com/13635059/65644969-c2a29e00-e030-11e9-850c-ad31b924d59b.png)



# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2526








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


