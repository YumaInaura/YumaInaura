---
title: "Ansible task ã®çŠ¶æ…‹ã®ç¨®é¡ ( ok / changed / failed / skipped / ignoring )"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ansible"]
published: true
---


# å›³è§£


![image.png](https://qiita-image-store.s3.amazonaws.com/0/89618/941d1a3a-9230-5e66-149d-b3321a16dbfc.png)

DO ã¯ SKIP ã®åå¯¾èªã¨ã—ã¦ã€é©å½“ã«ã¤ã‘ãŸåå‰ã€‚


## DO

ã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚ãªãœãªã‚‰ã‚¿ã‚¹ã‚¯ã¯å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚‚ã®ã€‚
çµæœã¯ä¸‰ç¨®é¡ã«åˆ†ã‹ã‚Œã‚‹ã€‚

### DO -> OK

ã‚¿ã‚¹ã‚¯ãŒæˆåŠŸã€‚

### DO -> CHANGED

ã‚¿ã‚¹ã‚¯ã§ãªã«ã‹å¤‰åŒ–ãŒèµ·ããŸæ™‚ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€‚
ãŸã¨ãˆã°ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–°è¦è¨­ç½®ã‚’ã—ãŸã‚Šã€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³å¤‰æ›´ã‚’ã—ãŸã‚Šã€‚

### DO -> FAILED

ã‚¿ã‚¹ã‚¯ãŒå¤±æ•—ã—ãŸæ™‚ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€‚
ãã®å¾Œã®æŒ™å‹•ã¯äºŒã¤ã«åˆ†ã‹ã‚Œã‚‹ã€‚

#### FAILED -> EXIT

æ¬¡ä»¥é™ã®ã‚¿ã‚¹ã‚¯ã«ã‚‚é€²ã¾ãšã€ãã“ã§çµ‚äº†ã™ã‚‹ã€‚

#### FAILED -> IGNORING

å¤±æ•—ã‚’ç„¡è¦–ã—ã¦æ¬¡ã®ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã«é€²ã‚€ã€‚

## SKIP

ã‚¿ã‚¹ã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã€‚ä½•ã‚‚ã—ãªã„ã€‚ã¤ã¾ã‚Š OK / CHANGED / FAILED ã®çµæœã‚‚ãªã„ã€‚

# Playbookã®ä¾‹

```yaml
- hosts:
    - localhost
  tasks:
    - name: skip
      debug:
        msg: this task will be skipped
      when: false

    - name: do -> ok
      debug:
        msg: task has done and return ok

    - name: do -> changed
      debug:
        msg: task has done and return changed
      changed_when: yes

    - name: do -> failed -> ignoring
      debug:
        msg: task has done, return failed, and continue to next task
      failed_when: yes
      ignore_errors: yes
 
    - name: do -> failed -> exit
      debug:
        msg: task has done, return failed, and exit ( do not continue to next task )
      failed_when: yes
 
    - name: after failed task
      debug:
        msg: task will be not run because previous task has failed and exit
```

## å®Ÿè¡Œçµæœä¾‹

```bash
TASK [skip] **************************************************************************************************************************************
skipping: [localhost]

TASK [do -> ok] **********************************************************************************************************************************
ok: [localhost] => {
    "msg": "task has done and return ok"
}

TASK [do -> changed] *****************************************************************************************************************************
changed: [localhost] => {
    "msg": "task has done and return changed"
}

TASK [do -> failed -> ignoring] ******************************************************************************************************************
fatal: [localhost]: FAILED! => {
    "msg": "task has done, return failed, and continue to next task"
}
...ignoring

TASK [do -> failed -> exit] **********************************************************************************************************************
fatal: [localhost]: FAILED! => {
    "msg": "task has done, return failed, and exit ( do not continue to next task )"
}
	to retry, use: --limit @/Users/yuma/projects/study/ansible/playbooks/task_state.retry

PLAY RECAP ***************************************************************************************************************************************
localhost                  : ok=4    changed=1    unreachable=0    failed=1   
```


# ç’°å¢ƒ

- ansible 2.6.1








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


