---
title: "Ansible ã®ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã§ åˆ¥ãƒãƒ¼ãƒˆãƒ»åŒä¸€ãƒ›ã‚¹ãƒˆã‚’è¤‡æ•°æŒ‡å®šã—ã¦ã‚‚ä¸€å›ã—ã‹å‡¦ç†ãŒèµ°ã‚‰ãªã„"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ansible"]
published: true
published_at: 2018-07-16
---

ã€Œç’°å¢ƒå´ã§ã†ã¾ãã‚„ã£ã¦åˆ¥ã€…ã®ãƒ›ã‚¹ãƒˆåã‚’ä»˜ã‘ã¦ãã‚Œã€ã¨ã„ã†ã“ã¨ã‚‰ã—ã„

>This is expected behavior, you must specify a different hostname for each host in inventory. Instead of doing it this way, you should give each VM a different name in your host inventory and use the ansible_ssh_host=127.0.0.1

[Cannot specify two different ports to the same host in inventory Â· Issue #8306 Â· ansible/ansible](https://github.com/ansible/ansible/issues/8306)



# ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹

ã€ŒåŒã˜ãƒ›ã‚¹ãƒˆã§ãƒãƒ¼ãƒˆé•ã†ã€ã‚°ãƒ«ãƒ¼ãƒ—ã‚’è¤‡æ•°ä½œã‚‹ã€‚

```conf:this_inventory_file.txt
[group1]
localhost

[group1:vars]
ansible_port=2221

[group2]
localhost

[group2:vars]
ansible_port=2222
```

# å‹•ä½œä¾‹

å…¨ãƒ›ã‚¹ãƒˆã‚’ä¸€è¦§ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ã€localhost1å€‹ã—ã‹å‡ºã¦ã“ãªã„ã€‚


```bash
$ ansible -i this_inventory_file.txt all --list-hosts
  hosts (1):
    localhost

 https://github.com/ansible/ansible/issues/8306
```

å®Ÿéš›ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èµ°ã‚‰ã›ã¦ã‚‚ã€ç‰‡æ–¹ã«ã—ã‹å‡¦ç†ãŒèµ°ã‚‰ãªã„ã‚ˆã†ã ã£ãŸã€‚

```bash
$ ansible -i this_inventory_file.txt all -m 'raw' -a 'echo ok'

localhost | SUCCESS | rc=0 >>
ok
```

# å¯¾å¿œ

`~/.ssh/config` ã§ãƒ›ã‚¹ãƒˆåã‚’ã¤ã‘ã¦ã‚„ã‚‹ãªã‚Šã—ã¦åå‰è§£æ±ºã™ã‚‹ã€‚

[Docker ã§ localhost ã«ç«‹ã¦ãŸ ssh ã‚µãƒ¼ãƒãƒ¼ã«ãƒ›ã‚¹ãƒˆåã‚’ä»˜ã‘ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ - Qiita](https://qiita.com/YumaInaura/items/fab4de7dca0af0795a37)

# Gist

- [Ansible closed issue | Can not list multiple hosts have different ports on a same hostname](https://gist.github.com/YumaInaura/d58b6f411453ff9b7534a536d419c242)

# ç’°å¢ƒ

- ansible 2.6.1








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2018-07-16
