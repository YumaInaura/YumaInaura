---
title: "2019å¹´ #HTML #PDF å¤‰æ›ã®æƒ…å‹¢ã¨ã¯ï¼Ÿ ( phantomjs -> wkhtmlpdf -> headless Chrome "
emoji: "ğŸ–¥"
type: "tech"
topics: ["HTML", "Node.js", "PDF"]
published: true
---

https://www.paperplane.app/blog/modern-html-to-pdf-conversion-2019/

# å¤ã„æ‰‹æ³•ã¨ã¯

PhantomJSã®ã‹ã‚ã‚Šã«wkhtmltopdfãŒé‡å®ã•ã‚Œã¦ããŸã‘ã©ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿ã€ HTML5ã‚„jsã«å¯¾å¿œã—ãã‚Œã¦ãªã„ã‚ˆãƒ¼ã£ã¦æ›¸ã‹ã‚Œã¦ã‚‹æ°—ãŒã™ã‚‹ã€‚

>The traditional approaches
>Until 2017, there were two common ways to convert HTML to PDF. The first was to use wkhtmltopdf â€” an open source command line tool specifically designed for the task. A second alternative was PhantomJS, an open source â€œheadlessâ€ web browser which can be controlled with JavaScript.

>Although these tools have served many people extremely well, they do have some downsides. Support for the latest HTML5 and JavaScript features lags a long way behind the modern browsers weâ€™re used to such as Chrome, Firefox or Safari.

# Chrome ã‚’ç›´æ¥åˆ©ç”¨ã™ã‚‹

å‡ã£ãŸã“ã¨ã‚’ã‚„ã‚ã†ã¨ã™ã‚‹ã¨ã€è‰²ã€…å¤§å¤‰ã ã‚ˆã£ã¦æ›¸ã„ã¦ã‚‹ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã€‚

>Using the Chrome devtools API
>If youâ€™d like to use Chrome directly yourself, you can get started by using the â€œprint-to-pdfâ€ command line option, but for more control over the PDF youâ€™ll need to communicate with Chromeâ€™s devtools API.

# Puppeteer

Chrome / chromium ã¨ dev-tool ã‚’ä¸Šæ‰‹ã«ä½¿ã†ãŸã‚ã®ä»•çµ„ã¿ã€ node ã®  Puppeteer ãŒè‰¯ã•ã’ã£ã¦æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã€‚

>Controlling Chrome with Puppeteer

>You could use Puppeteer to automate a Headless Chrome browser instance in almost any way. Here weâ€™ll just be focusing on how it can be used to create PDFs.

# Google cloud function

ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§ä½¿ã†æ–¹æ³•ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚

>Using Puppeteer via Google Cloud Functions
>One interesting new option is the ability to run headless Chrome on Google Cloudâ€™s â€œserverlessâ€ platform â€” Cloud Functions. This feature was added to Cloud Functions in August 2018 and should provide a low-cost and highly scalable way of generating PDFs. Googleâ€™s announcement post has a good walk-through that explains how to set it all up.

# æ¯”è¼ƒ

headless Chrome ãŒã‚¨ã‚¯ã‚»ãƒ¬ãƒ³ãƒˆï¼

![image](https://user-images.githubusercontent.com/13635059/67850145-24cc5280-fb4b-11e9-8b3f-80bc5772a579.png)

typesettingã£ã¦ãªã‚“ã ã‚ã†ãª

# å‚è€ƒ

å¼·ã„ï¼

>ä»•çµ„ã¿
>puppeteerã¯ã€WebdriverIOã®ã‚ˆã†ãªã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œã®ãƒ„ãƒ¼ãƒ«ã¨ã¯ç•°ãªã‚Šã€Chrome DevTools Protocol2 ã‚’åˆ©ç”¨ã—ã¦Node.jsã‹ã‚‰Chromeã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã¸æ¥ç¶šã—ã¦æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚

>puppeteerãŒã“ã‚Œã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ä¸€ç·šã‚’ç”»ã™ã®ã¯ã€ãªã‚“ã¨è¨€ã£ã¦ã‚‚æœ¬å®¶Chromeã®DevToolé–‹ç™ºãƒãƒ¼ãƒ ãŒä½œæˆãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã‚‹ã€ã¨ã„ã†ç‚¹ã§ã—ã‚‡ã†ã€‚

[--headlessæ™‚ä»£ã®æœ¬å‘½ï¼Ÿ Chrome ã‚’ Node.jsã‹ã‚‰æ“ä½œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª puppeteer ã«ã¤ã„ã¦ - Qiita](https://qiita.com/Quramy/items/26058e83e898ec2ec078)

# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2642








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


