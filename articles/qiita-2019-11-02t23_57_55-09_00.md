---
title: "#docker ã§ SOCKS proxy ã‚’åˆ©ç”¨ã—ã¦ ssh ã‚µãƒ¼ãƒãƒ¼çµŒç”±ã® https æ¥ç¶šã‚’ã™ã‚‹ "
emoji: "ğŸ–¥"
type: "tech"
topics: ["Docker"]
published: true
published_at: 2019-11-02
---

# docker run

```
docker run --name=socks-https-proxy -it --rm alpine sh
```

# å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® install

```
/ # apk add --update openssh curl
```

# å¿…è¦ãŒã‚ã‚Œã° local ã‹ã‚‰ ã‚³ãƒ³ãƒ†ãƒŠã«ç§˜å¯†éµã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãŠã

```
docker cp ~/.ssh/some.pem socks-https-proxy:/
```

# SOCKS ã§ proxy ã‚’èµ·å‹•ã™ã‚‹

èµ·å‹•ã•ã›ã£ã±ãªã—ã«ã—ã¦ãŠã

```
ssh -vND 8888 -i some.pem user@host
```


# docker exec

åŒã˜ã‚³ãƒ³ãƒ†ãƒŠã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®åˆ¥ã‚¿ãƒ–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹

```
$ docker exec -it socks-https-proxy  ash
```

# curl 

httpbin.orgã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã§æ¥ç¶šå…ƒã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç¢ºèª

```
/ # https_proxy=socks://127.0.0.1:8888 curl -v https://httpbin.org/ip

{
  "origin": "YYY.YYY.YYY.YYY, YYY.YYY.YYY.YYY"
}
```

sshæ¥ç¶šã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãªã£ã¦ã„ãŸã‚‰æˆåŠŸã€‚


# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2657








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2019-11-02
