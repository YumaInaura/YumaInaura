---
title: "#Ruby ã¨ #Rails ã® Time ã‚„ Time.zone ã®æ‰±ã„ãŒãŒãƒã‚¸ã§åˆ†ã‹ã‚‰ãªã„ã—æ··æ²Œã¨ã—ã¦ã‚‹ã®ã§ã¡ã‚‡ã£ã¨ã ã‘æ•´ç†ã—ãŸã„ã€‚"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ruby", "Rails"]
published: true
published_at: 2019-11-29t03:15
---

# Try at

ã“ã®æ™‚é–“ã«è©¦ã—ã¾ã—ãŸ

- JST 2019-11-28 hour 19
- UTC 2019-11-28 hour 10

# For Ruby

`require â€˜active_support/core_extâ€™`

# No Time zone setting

ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æŒ‡å®šãŒãªã„ã¨ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆãªã‹ã£ãŸã‚Š


```rb
Time.zone
# nil

Time.zone.now
# NoMethodError: undefined method `nowâ€™ for nil:NilClass
```

# TimezoneæŒ‡å®š

Time.zone ã¯ ActiveSupportã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã‚‹
ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã«ã¯ `Time.zone=` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œ

Railsã§ã‚ã‚Œã°application.rb ã® configã«æ›¸ãã ã‚ã†ãŒ

ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æŒ‡å®šè‡ªä½“ã¯ `Tokyo` ã§ã‚‚ `Asia/Tokyo` ã§ã‚‚åŒã˜ã‚ˆã†ã«ã¯ã‹ã‚‰ã£ã¦ãã‚Œã‚‹ã£ã½ã„
ã¡ãªã¿ã« `Time.zone = â€˜JSTâ€™` ã˜ã‚ƒå‹•ã‹ãªã„ã¨ã‹ä¿¡ã˜ã‚‰ã‚Œã‚‹ã‹ã„

```rb
Time.zone = 'UTC'
=> "UTC"
Time.zone
=> #<ActiveSupport::TimeZone:0x00007f8610941ef0 @name="UTC", @tzinfo=#<TZInfo::DataTimezone: Etc/UTC>, @utc_offset=nil>

=> #<ActiveSupport::TimeZone:0x00007f86108d1a38 @name="Asia/Tokyo", @tzinfo=#<TZInfo::DataTimezone: Asia/Tokyo>, @utc_offset=nil>
Time.zone = 'Tokyo'
=> "Tokyo"
Time.zone

Time.zone = 'Asia/Tokyo'
=> "Asia/Tokyo"
Time.zone
=> #<ActiveSupport::TimeZone:0x00007f86108d1a38 @name="Asia/Tokyo", @tzinfo=#<TZInfo::DataTimezone: Asia/Tokyo>, @utc_offset=nil>


Time.zone = 'JST'
# ArgumentError: Invalid Timezone: JST

```

# UTC

UTCã‚’timezoneæŒ‡å®šã—ãŸå ´åˆ



```rb
Time.zone = â€˜UTCâ€™
# => â€œUTCâ€

Time.zone
# => #<ActiveSupport::TimeZone:0x00007fe40e15ed08 @name=â€œUTCâ€, @tzinfo=#<TZInfo::DataTimezone: Etc/UTC>, @utc_offset=nil>

Time.zone.now
# => Thu, 28 Nov 2019 10:00:31 UTC +00:00

Time.zone.parse(â€˜2020-01-01 00:00:00â€™)
# => Wed, 01 Jan 2020 00:00:00 UTC +00:00
```


# JST

JSTã‚’timezoneæŒ‡å®šã—ãŸå ´åˆ

```rb
Time.zone = â€˜Tokyoâ€™
# => â€œTokyoâ€

Time.zone
# => #<ActiveSupport::TimeZone:0x00007fe40d2721a0 @name=â€œTokyoâ€, @tzinfo=#<TZInfo::DataTimezone: Asia/Tokyo>, @utc_offset=nil>

Time.zone.now
# => Thu, 28 Nov 2019 19:00:47 JST +09:00

Time.zone.parse(â€˜2020-01-01 00:00:00â€™)
# => Wed, 01 Jan 2020 00:00:00 JST +09:00
```


# Timeç³»

ã“ã¡ã‚‰ã¯Rubyç³»ãªã®ã§ `Time.zone` ã‚’å‚ç…§ã—ãªã„ã€ã¨ã„ã†ã‚ˆã‚Š `Time.zone` ãªã‚“ã¦ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚ã‚¯ãƒ©ã‚¹ã‚‚ãªã„
Rails = ActiveSupport ã® Time.zone ç³»ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã¯åˆ†ã‘ã¦è€ƒãˆã‚‹ã“ã¨

Ruby ã§æœ€åˆã‹ã‚‰å‡ºæ¥ã‚‹ã‹ã¨æ€ã„ãã‚„ã€ ä¸€éƒ¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ requireãŒå¿…è¦ã¨ã„ã†ç½  -> Time.parse ã¨ã‹
require active support ã§ã‚‚å‹•ãã‚ˆã†ã«ãªã‚‹ã®ã§ã€ã¾ã•ã‹ã®activesupportã®ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã¨æ€ã£ã¦é©šã„ãŸãŒé•ã£ãŸ

ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’å¤‰ãˆã‚‹ã«ã¯ rubyå®Ÿè¡Œæ™‚ã®ç’°å¢ƒå¤‰æ•°ã‚’å¤‰ãˆã‚‹

```
TZ=UTC ruby ...
TZ=Asia/Tokyo ruby ...
```

ç’°å¢ƒå¤‰æ•°æŒ‡å®šã‚‚ã—ãã¯ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«ã‚ˆã£ã¦çµæœãŒå¤‰ã‚ã‚‹
Rubyã ã‘ã®å‡¦ç†ã§ã‚‚ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹ã‚ˆã†ã 

```rb
Time.now
# => 2019-11-28 10:19:37 +0000

Time.now
# => 2019-11-28 19:19:43 +0900

# Time.parse / Time.zone.parse

Time.parse(â€˜2020-01-01 00:00:00â€™)
# NoMethodError: undefined method `parseâ€™ for Time:Class

Time.parse(â€˜2020-01-01 00:00:00â€™)
# => 2020-01-01 00:00:00 +0900

Time.zone = â€˜UTCâ€™
# => â€œUTCâ€

Time.zone.parse(â€˜2020-01-01 00:00:00â€™)
# => Wed, 01 Jan 2020 00:00:00 UTC +00:00
```

# Rubyã£ã½ã„ã®ã«Railsï¼Ÿ currentç³»

nowã˜ã‚ƒãªãã¦currentã£ã¦ã„ã†åå‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯Rubyã˜ã‚ƒãªãã¦Rails/AcviveSupportã®ã‚‚ã®ã 

```rb
Time.current
# NoMethodError: undefined method `currentâ€™ for Time:Class

require â€˜active_support/core_extâ€™

Time.current
# => 2019-11-28 19:21:56 +0900

ãªã®ã«classã¯Timeã¨ã„ã†å¥‡ç‰¹ãªã‚„ã¤

Time.current.class
# => Time
```

ã¡ãªã¿ã« `Date.today` ã¯ Ruby ã®ã‚‚ã®ã ãŒ `Date.current` `Date.yesterday` `Date.tomorrow` ã¯ Railsã®ã‚‚ã®ã ã¨ã„ã†å¤§ã„ãªã‚‹ç½ ã‚‚ã‚ã‚‹

# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2774








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2019-11-29
