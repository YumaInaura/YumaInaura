---
title: #Ruby ã§ local ã« SOCKS proxy ã‚’ç«‹ã¦ã¦ ssh ã‚µãƒ¼ãƒãƒ¼ã‚’è¸ã¿å°ã« https æ¥ç¶šã‚’ã™ã‚‹ä¾‹ (  faraday
emoji: "ğŸ–¥"
type: "idea"
topics: ["Ruby"]
published: true
---

# ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ SOCSK proxy ã‚’èµ·å‹•ã—ã¦ãŠã

```
ssh -vND 8888 user@host
```

# gem Install

```rb
gem install faraday
gem install faraday_adapter_socks
```

# Code

```rb
require 'faraday_adapter_socks'

options = { proxy: { uri: URI.parse("socks://127.0.0.1:8888") } }

url = 'https://httpbin.org/ip'

conn = Faraday.new(url, options) do |faraday|
  faraday.request :url_encoded
  faraday.adapter :net_http_socks  # please assign ":net_http_socks" adapter
end

response = JSON.parse(conn.get.body)
# => {"origin"=>"YYY.YYY.YYY.YYY., YYY.YYY.YYY.YYY"}
```

# è‡ªåˆ†ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¤‰ã‚ã£ã¦ã„ãŸã‚‰æˆåŠŸ

ğŸ‰ 

# å…ƒã®å•é¡Œ

faraday ã§ proxy ã‚’æŒ‡å®šã—ã¦ã‚‚

`Using socks proxy with auth leads to Faraday::ConnectionFailed: end of file reached`

ã¨ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã¦ä½¿ãˆãªã„ã€‚


[Faraday and socks proxy with auth supporting Â· Issue #787 Â· lostisland/faraday](https://github.com/lostisland/faraday/issues/787)

# Rubyé–¢ä¿‚ç„¡ã—ã§ curl ã§ç¢ºèªã™ã‚‹ä¾‹

```
$ https_proxy=socks://127.0.0.1:8888 curl https://httpbin.org/ip
{
  "origin": "YYY.YYY.YYY, YYY.YYY.YYY.YYY."
}
```

# ã¨ã“ã‚ã§ Faradayã®åå‰ã®ç”±æ¥ã£ã¦ãªã«ï¼Ÿ

>ã€æ„å‘³ã€‘ãƒ•ã‚¡ãƒ©ãƒ‡ãƒ¼ ã€Š1791â€1867; è‹±å›½ã®ç‰©ç†å­¦è€…ã€‹... 

ã“ã®äººï¼Ÿãªã‚“ã ã‚ã†ã‹

![image](https://user-images.githubusercontent.com/13635059/68070043-ea152500-fdab-11e9-9aad-ac2427fdf7ae.png)

Faradayã«ä¼¼ã¦ã„ã‚‹ã‚¹ã‚¿ãƒ¼ãƒãƒƒã‚¯ã‚¹ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚ã‚ã‚Šãƒ¼ãã‚Šã™ã¾

![image](https://user-images.githubusercontent.com/13635059/68070037-c81ba280-fdab-11e9-9ee4-ca13509e39a9.png)


# Original by Github issue

https://github.com/YumaInaura/YumaInaura/issues/2656








<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


