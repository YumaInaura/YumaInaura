---
title: "Ansible 2.4 ã‹ã‚‰ 2.5 ã¸ã®ç§»è¡Œã‚¬ã‚¤ãƒ‰ (ä¸»è¦éƒ¨åˆ†)"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ansible"]
published: true
published_at: 2018-07-16t21:21
---

# å‡ºå±•

[Ansible 2.5 Porting Guide â€” Ansible Documentation](https://docs.ansible.com/ansible/2.5/porting_guides/porting_guide_2.5.html) ã‚ˆã‚Š


# Playbook

## roles ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å¤‰æ•°ã®æ¸¡ã—æ–¹ã®ä¿®æ­£


### å¤

ä»Šã¾ã§ã¯ role ã«æ¸¡ã™å¤‰æ•°ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã”ã£ã¡ã‚ƒã«ãªã£ã¦ã„ãŸã€‚

```yaml
roles:
    - { role: myrole, name: Justin, othervar: othervalue, become: True}
```

### æ–°

å¤‰æ•°ã¯ `vars` ã«æ¸¡ã™ã‚ˆã†ã«ãªã£ãŸã€‚

```yaml
roles:
    - { role: myrole, vars: {name: Justin, othervar: othervalue}, become: True}
```

### æ„Ÿæƒ³

ã€Œã§ã™ã‚ˆã­ï¼ã€ã£ã¦æ„Ÿã˜ã€‚

# éæ¨å¥¨

## Jinjaã®ãƒ•ã‚£ãƒ«ã‚¿è¨˜æ³•ã‚’åˆ©ç”¨ã—ãŸæ¡ä»¶è©•ä¾¡ã¯éæ¨å¥¨ã«

ãƒ•ã‚£ãƒ«ã‚¿è¨˜æ³•ã§ã®è©•ä¾¡ã¯å°†æ¥çš„ã« 2.9 ã§å‰Šé™¤ã•ã‚Œã‚‹äºˆå®šã€‚

è©•ä¾¡è¨˜æ³•ã¯æ¯”è¼ƒã«ä½¿ã„ã€ãƒ•ã‚£ãƒ«ã‚¿ã¯ãƒ‡ãƒ¼ã‚¿æ“ä½œã«ä½¿ãŠã†ã€‚


### å¤

```yaml
when:
    - result | failed
    - not result | success
```

### æ–°

```yaml
when:
    - result is failed
    - results is not successful
```

### ä½™è«‡

ã“ã®å¤‰æ›´ã¯ã€Jinjaã®é©åˆ‡ãªç†è§£ã€ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ç†è§£ã®ãŸã‚ã«å½¹ç«‹ã¤ã“ã¨ã§ã—ã‚‡ã†ã€‚

>Jinja tests are used for comparisons, while filters are used for data manipulation and have different applications in jinja.

ã€Œã“ã“ã§ã„ã†ã€Œãƒ†ã‚¹ãƒˆã€ã£ã¦ä½•ãªã®ï¼Ÿã€
ã€Œwhen ã¯ãƒ†ã‚¹ãƒˆã˜ã‚ƒãªãã¦æ¡ä»¶åˆ†å²ã˜ã‚ƒãªã„ã®ï¼Ÿã€

ã¨æ€ã†ãŒã€ãã‚‚ãã‚‚å€¤ã®æ¯”è¼ƒ ( è©•ä¾¡æˆåŠŸæœŸå¾…ã™ã‚‹ã“ã¨ ) ã‚’ test ã¨å‘¼ã¶ã®ã§ã€ã“ã¡ã‚‰ã®è¡¨ç¾ã‹ã‚‰æ¥ã¦ã„ã‚‹ã‚“ã ã‚ã†ã€‚

[Linux test command information and examples](https://www.computerhope.com/unix/test.htm)

Jinja2æœ¬ä½“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã¿ã‚ˆã†ã€‚

[Template Designer Documentation â€” Jinja2 Documentation (2.10)](http://jinja.pocoo.org/docs/2.10/templates/#tests)

>### Tests
>Beside filters, there are also so-called â€œtestsâ€ available. Tests can be used to test a variable against a common expression. 

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

è‰²ã€…å‰Šé™¤ã•ã‚ŒãŸãŒã€ã“ã“ã§ã¯ã»ã¼å‰²æ„›ã€‚

æ°—ã«ãªã£ãŸã‚‚ã®

>docker use docker_container and docker_image instead

docker ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ docker ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã®ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã ãŒã€éå»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æ—¢ã« docker_container ã¨ docker_image ã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹ã€‚

# å‚™è€ƒ

- ä½•ã‹æ–°ã—ãåˆ†ã‹ã£ãŸã‚‰è¿½è¨˜ã€‚









<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->



# å…¬é–‹æ—¥æ™‚

2018-07-16
