---
title: "Ruby | Qiita API ã§è‡ªåˆ†ã®è¨˜äº‹å…¨ã¦ã‚’ç·¨é›†ã—ã¦ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¾‹"
emoji: "ğŸ–¥"
type: "tech"
topics: ["Ruby", "QiitaAPI"]
published: true
---

# æ¦‚è¦

è‡ªåˆ†ã®è¨˜äº‹å…¨ã¦ã‚’å–å¾—ã—ã€å…ƒã®ãƒ†ã‚­ã‚¹ãƒˆæœ¬æ–‡ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ç·¨é›†ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¶šã‘ã¦ã„ãã€‚

ã¡ãªã¿ã«2000è¨˜äº‹ã»ã©ã‚’é€£ç¶šã§ç·¨é›†ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€é€”ä¸­ã§åˆ¶é™ã•ã‚ŒãŸã®ã‹ã€Fobbidenæ‰±ã„ã«ãªã£ãŸã€‚

# ã‚³ãƒ¼ãƒ‰

```rb
require 'net/https'
require 'uri'
require 'json'

uri = URI.parse("https://qiita.com/")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request_header = {'Content-Type' =>'application/json', "Authorization" => "Bearer #{ENV['TOKEN']}"}

round = 0

# 100ã¯Qiita APIã®ãƒšãƒ¼ã‚¸ã‚ãã‚Šã®MAX
(1..100).each do |i|
  get_url = "https://qiita.com/api/v2/users/#{ENV['USER_ID']}/items?page=#{i}&per_page=100"

  get_request = Net::HTTP::Get.new(get_url, request_header)

  get_response = http.request(get_request)

  items = JSON.parse(get_response.response.body)

  items.each do |item|
    patch_url = "https://qiita.com/api/v2/items/#{item['id']}"
    patch_request = Net::HTTP::Patch.new(patch_url, request_header)

    round += 1
    puts "#{round} #{item['url']}"

    # ã™ã§ã«ãƒªãƒ³ã‚¯ãŒä»˜ã„ã¦ã„ã‚‹è¨˜äº‹ã¯ã‚¹ã‚­ãƒƒãƒ—
    if item['body'] =~ /\n
   EOM

    patch_request.body = { 'body' => edit_body, 'title' => item['title'] }.to_json

    patch_response = http.request(patch_request)
    puts patch_response.code
  end
end

# PATCH /api/v2/items/:item_id

# https://qiita.com/api/v2/docs#patch-apiv2itemsitem_id
```













<!-- Update From Qiita API -->

# ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†


ä½•ã‹è³ªå•ã€æ‚©ã¿äº‹ã€ç›¸è«‡ãªã©ã‚ã‚Œã°LINEã‚ªãƒ¼ãƒ—ãƒ³ãƒãƒ£ãƒƒãƒˆã‚‚ã”åˆ©ç”¨ãã ã•ã„ã€‚

https://line.me/ti/g2/eEPltQ6Tzh3pYAZV8JXKZqc7PJ6L0rpm573dcQ





# Twitter


https://twitter.com/YumaInaura


<!-- Update From Qiita API -->


